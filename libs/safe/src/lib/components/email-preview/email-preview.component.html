<ui-dialog>
  <ng-container ngProjectAs="header">
    <h1>{{ 'components.emailPreview.title' | translate }}</h1>
  </ng-container>
  <ng-container ngProjectAs="content">
    <form class="flex flex-col gap-4" [formGroup]="form" *ngIf="form">
      <div uiFormFieldDirective>
        <label>{{ 'components.emailPreview.subject' | translate }}</label>
        <input formControlName="subject" type="text" />
        <mat-error *ngIf="this.form.controls.subject.hasError('required')">
          {{ 'components.emailPreview.errors.missingSubject' | translate }}
        </mat-error>
      </div>
      <div uiFormFieldDirective>
        <label>{{ 'components.emailPreview.from' | translate }}</label>
        <input formControlName="from" type="text" />
      </div>
      <div uiFormFieldDirective id="previewEmailTo">
        <label class="block text-sm font-medium leading-6 text-gray-900">{{
          'components.emailPreview.to' | translate
        }}</label>
        <input
          #emailsInput
          [matChipInputFor]="chipList"
          [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
          (focusout)="addEmail($event)"
          (matChipInputTokenEnd)="addEmail($event)"
        />
        <div uiChipList formControlName="to" #chipList>
          <ui-chip
            [selectable]="true"
            [removable]="true"
            (removed)="removeEmail(email)"
            [value]="email"
            *ngFor="let email of emails"
          >
            {{ email }}
          </ui-chip>
        </div>
        <mat-error>{{ errorMessage() | translate }}</mat-error>
      </div>
      <kendo-fileselect
        class="mb-4"
        [multiple]="true"
        formControlName="files"
      ></kendo-fileselect>
      <editor [init]="editor" formControlName="html"></editor>
    </form>
  </ng-container>
  <ng-container ngProjectAs="actions">
    <ui-button uiDialogClose>
      {{ 'common.dismiss' | translate }}
    </ui-button>
    <ui-button
      category="secondary"
      variant="primary"
      [uiDialogClose]="form.value"
      cdkFocusInitial
      [disabled]="!form.valid"
    >
      {{ 'common.send' | translate }}
    </ui-button>
  </ng-container>
</ui-dialog>
