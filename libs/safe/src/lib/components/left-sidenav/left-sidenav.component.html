<section class="pt-2 block">
  <ng-container *ngFor="let group of navGroups; let i = index" class="h-full">
    <div class="sidenav-header">
      {{ group.name }}
      <ui-button
        *ngIf="appLayout && canAddPage"
        [isIcon]="true"
        icon="add"
        variant="grey"
        [uiTooltip]="'models.page.add' | translate"
        routerLink="./add-page"
        (click)="largeDevice ? null : nav.toggle()"
      ></ui-button>
    </div>
    <div
      cdkDropList
      (cdkDropListDropped)="drop($event, group)"
      [class]="
        appLayout
          ? canAddPage
            ? largeDevice
              ? 'app-sidenav-add-page'
              : 'app-sidenav-phone-add-page'
            : largeDevice
            ? 'app-sidenav'
            : 'app-sidenav-phone'
          : ''
      "
    >
      <!-- Classes determine nav-list height for application layout -->
      <ul>
        <ng-container *ngFor="let item of group.navItems">
          <div cdkDrag [cdkDragDisabled]="!item.orderable" class="show-icons">
            <li class="nav-item">
              <a
                [routerLink]="item.path"
                routerLinkActive="active-link"
                (click)="largeDevice ? null : nav.toggle()"
                [class]="item.class ? item.class : ''"
              >
                <mat-icon class="nav-icon">
                  {{ item.icon }}
                </mat-icon>
                <p class="nav-text m-0" [uiTooltip]="item.name">
                  {{ item.name }}
                </p>
              </a>
              <div
                class="nav-actions items-center"
                *ngIf="item.action || item.orderable"
              >
                <ui-button
                  class="hide-icons"
                  [isIcon]="true"
                  *ngIf="item.action"
                  (click)="onClick(item.action.callback, $event)"
                  uiTooltip="{{ item.action.toolTip }}"
                  icon="delete"
                >
                </ui-button>
                <ui-button
                  class="hide-icons"
                  [isIcon]="true"
                  cdkDragHandle
                  *ngIf="item.orderable"
                  icon="drag_indicator"
                >
                </ui-button>
              </div>
            </li>
            <!-- Preview when dragging element -->
            <li *cdkDragPreview class="nav-item bg-white shadow-2lg rounded-lg">
              <a [class]="item.class ? item.class : ''">
                <mat-icon class="nav-icon">
                  {{ item.icon }}
                </mat-icon>
                <div class="pl-2">{{ item.name }}</div>
              </a>
            </li>
          </div>
        </ng-container>
      </ul>
    </div>
    <ng-container *ngIf="appLayout && canAddPage">
      <div class="flex flex-col items-center w-full absolute bottom-0">
        <ui-divider class="m-0"></ui-divider>
        <ui-button
          class="my-4"
          icon="add"
          category="secondary"
          variant="primary"
          routerLink="./add-page"
          (click)="largeDevice ? null : nav.toggle()"
        >
          {{ 'models.page.add' | translate }}
        </ui-button>
      </div>
    </ng-container>
    <ui-divider class="m-0" *ngIf="i < navGroups.length - 1"></ui-divider>
  </ng-container>
</section>
