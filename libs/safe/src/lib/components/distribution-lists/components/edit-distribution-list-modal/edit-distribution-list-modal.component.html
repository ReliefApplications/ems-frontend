<safe-modal size="medium">
  <h1 mat-dialog-title>
    {{
      (data
        ? 'components.distributionLists.edit.update'
        : 'components.distributionLists.edit.new'
      ) | translate
    }}
  </h1>
  <div mat-dialog-content>
    <form [formGroup]="form" class="flex flex-col">
      <div class="flex flex-col">
        <div uiFormFieldDirective [outline]="true" class="flex-1">
          <label>{{
            'components.distributionLists.edit.name' | translate
          }}</label>
          <input formControlName="name" type="text" />
          <mat-error>{{ errorMessage('name') | translate }}</mat-error>
        </div>
        <mat-form-field appearance="outline">
          <mat-label>{{ 'common.email.few' | translate }}</mat-label>
          <mat-chip-list #chipList formControlName="emails">
            <mat-chip
              *ngFor="let email of emails"
              [selectable]="true"
              [removable]="true"
              (removed)="removeEmail(email)"
            >
              {{ email }}
              <safe-icon matChipRemove icon="cancel" [size]="18"></safe-icon>
            </mat-chip>
            <input
              #emailsInput
              [matChipInputFor]="chipList"
              [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
              (focusout)="addEmail($event)"
              (matChipInputTokenEnd)="addEmail($event)"
            />
          </mat-chip-list>
          <mat-error>{{ errorMessage('emails') | translate }}</mat-error>
        </mat-form-field>
      </div>
    </form>
  </div>
  <div mat-dialog-actions align="end">
    <ui-button mat-dialog-close>
      {{ 'common.close' | translate }}
    </ui-button>
    <ui-button
      category="secondary"
      variant="primary"
      [mat-dialog-close]="form.value"
      [disabled]="!form.valid"
    >
      {{ (data ? 'common.update' : 'common.create') | translate }}
    </ui-button>
  </div>
</safe-modal>
