<ui-dialog size="medium">
  <ng-container ngProjectAs="header">
    <h1>
      {{
        (data
          ? 'components.distributionLists.edit.update'
          : 'components.distributionLists.edit.new'
        ) | translate
      }}
    </h1>
  </ng-container>
  <ng-container ngProjectAs="content">
    <form [formGroup]="form" class="flex flex-col">
      <div class="flex flex-col">
        <div uiFormFieldDirective  class="flex-1">
          <label>{{
            'components.distributionLists.edit.name' | translate
          }}</label>
          <input formControlName="name" type="text" />
          <mat-error>{{
            'components.distributionLists.errors.name.required' | translate
          }}</mat-error>
        </div>
        <div>
          <label class="block text-sm font-medium leading-6 text-gray-900">{{
            'common.email.few' | translate
          }}</label>
          <div uiChipList #chipList formControlName="emails">
            <ui-chip
              *ngFor="let email of form.get('emails')?.value"
              [removable]="true"
              [value]="email"
              (removed)="removeEmail(email)"
            >
              {{ email }}
            </ui-chip>
          </div>
          <input
            #emailsInput
            [uiChipListFor]="chipList"
            [chipInputSeparatorKeyCodes]="separatorKeysCodes"
            (focusout)="addEmail($event)"
            (chipTokenEnd)="addEmail($event)"
          />
          <mat-error *ngIf="form.get('emails')?.hasError('required')">{{
            'components.distributionLists.errors.emails.required' | translate
          }}</mat-error>
          <mat-error *ngIf="form.get('emails')?.hasError('pattern')">{{
            'components.distributionLists.errors.emails.pattern' | translate
          }}</mat-error>
        </div>
      </div>
    </form>
  </ng-container>
  <ng-container ngProjectAs="actions">
    <ui-button uiDialogClose>
      {{ 'common.close' | translate }}
    </ui-button>
    <ui-button
      category="secondary"
      variant="primary"
      [uiDialogClose]="form.value"
      [disabled]="!form.valid"
    >
      {{ (data ? 'common.update' : 'common.create') | translate }}
    </ui-button>
  </ng-container>
</ui-dialog>
