<safe-alert>
  <safe-icon icon="info"></safe-icon>
  {{ 'components.widget.settings.map.layers.online.info' | translate }}
</safe-alert>
<!-- LAYER SEARCHBAR -->
<mat-form-field appearance="outline" class="w-full">
  <mat-label>{{
    'components.widget.settings.map.layers.online.select' | translate
  }}</mat-label>
  <input
    type="text"
    matInput
    [(ngModel)]="search"
    [ngModelOptions]="{ standalone: true }"
    (ngModelChange)="onSearch($event)"
    autocomplete="off"
    placeholder="{{ 'common.placeholder.search' | translate }}"
  />
  <div *ngIf="availableLayers.length > 0" class="layer-suggestions">
    <ui-button
      *ngFor="let layer of availableLayers"
      (click)="addLayer(layer)"
    >
      {{ layer.title }}
      <safe-badge *ngFor="let tag of layer.tags">{{ tag }}</safe-badge>
    </ui-button>
  </div>
</mat-form-field>
<!-- LIST of LAYERS -->
<ng-container *ngIf="layers.value.length > 0">
  <h2>
    {{ 'components.widget.settings.map.layers.online.selected' | translate }}
  </h2>
  <!-- Table container -->
  <div class="overflow-x-hidden shadow-2lg">
    <!-- Table scroll container -->
    <div class="overflow-x-auto">
      <table cdk-table uiTableStyle uiTableWrapper [dataSource]="layers.value">
        <ng-container cdkColumnDef="title">
          <th uiCellHeader *cdkHeaderCellDef scope="col">
            {{ 'common.name' | translate }}
          </th>
          <td uiCell *cdkCellDef="let element" class="font-bold">
            {{ element.title }}
          </td>
        </ng-container>
        <ng-container cdkColumnDef="actions" [stickyEnd]="true">
          <th uiCellHeader *cdkHeaderCellDef scope="col" class="w-16"></th>
          <td uiCell *cdkCellDef="let element">
            <ui-button
              [isIcon]="true"
              icon="delete"
              category="primary"
              variant="danger"
              (click)="removeLayer(element.id)"
            ></ui-button>
          </td>
        </ng-container>

        <tr cdk-header-row *cdkHeaderRowDef="tableColumns"></tr>
        <tr *cdkRowDef="let row; columns: tableColumns" cdk-row></tr>
      </table>
    </div>
  </div>
</ng-container>
