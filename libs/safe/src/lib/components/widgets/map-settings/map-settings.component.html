<mat-drawer-container class="grow bg-transparent" autosize *ngIf="tileForm">
  <mat-drawer class="border-none pr-2" mode="side" [opened]="true">
    <ng-container *ngFor="let button of currentButtons">
      <safe-button
        matTooltip="{{ button.label | translate }}"
        icon="{{ button.icon }}"
        [attr.data-selected]="button.isSelected(currentTab)"
        (click)="setCurrentTab(button.value)"
      >
        {{ button.label | translate }}
      </safe-button>
    </ng-container>
  </mat-drawer>

  <div class="flex flex-wrap gap-4 flex-col lg:flex-row lg:h-full">
    <ng-container *ngIf="currentTab !== null">
      <div class="lg:basis-1/2 overflow-auto lg:max-h-full">
        <div class="flex flex-1 justify-between">
          <h2>
            {{ currentTabTitle | translate }}
          </h2>
          <!-- Close button -->
          <safe-button
            [isIcon]="true"
            icon="close"
            (click)="currentTab = null"
          ></safe-button>
        </div>
        <div #templateLoader></div>
      </div>
    </ng-container>
    <!-- MAP PREVIEW -->
    <div class="lg:flex-1 max-lg:min-w-full h-80 lg:min-h-full flex-shrink-0">
      <safe-map
        (mapEvent)="handleMapEvent($event)"
        [displayMockedLayers]="displayMockedLayers"
        [mapSettings]="mapSettings"
        [updateLayerOptions]="updateLayer$ | async"
        [addOrDeleteLayer]="layerToAddOrDelete$ | async"
        class="w-full h-full"
      >
      </safe-map>
    </div>
  </div>
</mat-drawer-container>
