<ui-spinner diameter="45" class="page-loader" *ngIf="loading"></ui-spinner>
<div *ngIf="!loading" [formGroup]="formGroup">
  <div class="flex flex-col gap-y-2">
    <!-- Symbol style -->
    <div class="flex flex-col">
      <div uiFormFieldDirective>
        <label class="mb-4">
          {{ 'components.widget.settings.map.edit.cluster.symbol' | translate }}
        </label>
        <safe-icon-picker
          formControlName="style"
          [color]="formGroup.value.color"
        ></safe-icon-picker>
      </div>
    </div>
    <div class="flex flex-row justify-between gap-4">
      <!-- Symbol color -->
      <div class="flex flex-col">
        <h4>Color</h4>
        <kendo-colorpicker formControlName="color"></kendo-colorpicker>
      </div>
      <!-- Symbol size -->
      <div class="flex flex-1 flex-col" *ngIf="showSize">
        <h4>Size</h4>
        <ui-slider formControlName="size" [minValue]="1" [maxValue]="100">
        </ui-slider>
      </div>
    </div>
    <ng-container *ngIf="type.enable">
      <ng-container 
        *ngTemplateOutlet="type.shape === 'point' ? pointTmpl : polygonTmpl"
      ></ng-container>
    </ng-container>
  </div>
</div>

<ng-template #pointTmpl></ng-template>

<ng-template #polygonTmpl>
  <ui-divider></ui-divider>
  <div class="flex flex-row justify-between">
    <!-- STROKE COLOR -->
    <div class="flex flex-col">
      <h4>Stroke</h4>
      <kendo-colorpicker></kendo-colorpicker>
    </div>
      <!-- STROKE WIDTH -->
    <div uiFormFieldDirective>
      <label>Stroke width</label>
      <input
        type="number"
        min="0"
        max="100"
      />
    </div>
    <!-- STROKE OPACITY -->
    <div uiFormFieldDirective>
      <label>Stroke opacity</label>
      <input
        type="number"
        step=".1"
        min="0"
        max="1"
      />
    </div>
  </div>

  <div class="flex flex-row justify-between gap-4">
    <!-- FILL COLOR  -->
    <div class="flex flex-col">
      <h4>Fill</h4>
      <kendo-colorpicker></kendo-colorpicker>
    </div>
    <!-- FILL OPACITY -->
    <div uiFormFieldDirective class="flex flex-1 flex-col">
      <h4>Fill opacity</h4>
      <input
        type="number"
        step=".1"
        min="0"
        max="1"
      />
    </div>
  </div>
</ng-template>
