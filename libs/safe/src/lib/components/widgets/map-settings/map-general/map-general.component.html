<form [formGroup]="form">
  <div class="flex flex-col">
    <h2>{{ 'common.general' | translate }}</h2>
    <div uiFormFieldDirective>
      <label>{{ 'common.name' | translate }}</label>
      <input formControlName="title" type="string" />
    </div>
    <!-- Resource selection -->
    <div uiFormFieldDirective class="flex-1">
      <label>{{ 'common.resource.one' | translate }}</label>
      <ui-graphql-select
        valueField="id"
        textField="name"
        [query]="resourcesQuery"
        formControlName="resource"
        [selectedElements]="[resource]"
      >
      </ui-graphql-select>
    </div>
  </div>
  <div class="flex flex-col mt-8" *ngIf="resource">
    <h2>{{ 'components.widget.settings.map.dataset' | translate }}</h2>
    <ui-alert class="mb-6">
      {{ 'components.widget.settings.map.tooltip.dataset' | translate }}
    </ui-alert>
    <safe-query-builder
      [form]="$any(form.controls.query)"
      [queryName]="resource.queryName"
      [canSelectDataSet]="false"
      [canExpand]="false"
      [showStyle]="false"
      [showSort]="false"
    ></safe-query-builder>
  </div>
</form>
