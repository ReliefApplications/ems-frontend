<div *ngIf="formArray.value.length >= 0">
  <mat-form-field *ngIf="formArray.value.length > 0" appearance="outline">
    <!-- todo(translate) -->
    <mat-label>Serie</mat-label>
    <mat-select [formControl]="selectedSerie">
      <mat-option *ngFor="let serie of formArray.value" [value]="serie.serie">
        <!-- todo(translate) -->
        {{ serie.serie || 'Other' }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  
  <!-- if are pie/polar/donut/radar then show categories-->
  <ng-container *ngIf="['pie', 'polar', 'donut', 'radar'].includes(chartType)">
    <safe-categories-settings [formArray]="$any(formArray.at(0).get('categories'))">
    </safe-categories-settings>
  </ng-container>

  <div *ngIf="formGroup" [formGroup]="formGroup">
    <div class="flex flex-row justify-between">
      <div class="flex flex-col" *ngIf="formGroup.get('color')">
        <!-- todo(translate) -->
        <span class="text-gray-500 mb-1 text-xs">Color</span>
        <kendo-colorpicker formControlName="color"></kendo-colorpicker>
      </div>
      <mat-form-field *ngIf="formGroup.get('fill')" appearance="outline">
        <mat-label>Fill</mat-label>
        <mat-select formControlName="fill">
          <!-- todo(translate) -->
          <mat-option>Auto</mat-option>
          <mat-option *ngFor="let type of fillTypes" [value]="type">
            {{ type }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <!-- Interpolation (line charts) -->
    <div class="flex flex-row justify-between">
      <mat-form-field
        *ngIf="formGroup.get('interpolation')"
        appearance="outline"
      >
        <!-- todo(translate) -->
        <mat-label>Interpolation</mat-label>
        <mat-select formControlName="interpolation">
          <!-- todo(translate) -->
          <mat-option>Auto</mat-option>
          <mat-option *ngFor="let type of interpolationTypes" [value]="type">
            {{ type }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field
        *ngIf="
          formGroup.value.interpolation === 'step' && formGroup.get('stepped')
        "
        appearance="outline"
      >
        <!-- todo(translate) -->
        <mat-label>Step interpolation</mat-label>
        <mat-select formControlName="stepped">
          <!-- todo(translate) -->
          <mat-option>Auto</mat-option>
          <mat-option
            *ngFor="let type of stepInterpolationTypes"
            [value]="type"
          >
            {{ type }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>
</div>
