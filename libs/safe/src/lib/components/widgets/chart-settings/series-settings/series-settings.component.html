<div *ngIf="formArray.value.length >= 0">
  <div class="flex flex-row justify-between">
    <!-- Serie selection -->
    <mat-form-field *ngIf="formArray.value.length > 0" appearance="outline">
      <mat-label>
        {{ 'components.widget.settings.chart.series.title' | translate }}
      </mat-label>
      <mat-select [formControl]="selectedSerie">
        <mat-option *ngFor="let serie of formArray.value" [value]="serie.serie">
          {{
            serie.serie || 'components.widget.settings.chart.other' | translate
          }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <!-- Serie Visibility -->
    <div
      *ngIf="formGroup"
      [formGroup]="formGroup"
      class="flex flex-row justify-between mb-5"
    >
      <mat-slide-toggle formControlName="visible">{{
        'components.widget.settings.chart.series.showSeries' | translate
      }}</mat-slide-toggle>
      <br />
    </div>
  </div>
  <div *ngIf="formGroup" [formGroup]="formGroup">
    <div class="flex flex-row justify-between">
      <div class="flex flex-col" *ngIf="formGroup.get('color')">
        <span class="text-gray-500 mb-1 text-xs">
          {{ 'components.widget.settings.chart.color' | translate }}
        </span>
        <kendo-colorpicker formControlName="color"></kendo-colorpicker>
      </div>
      <mat-form-field *ngIf="formGroup.get('fill')" appearance="outline">
        <mat-label>{{
          'components.widget.settings.chart.series.fill'
            | translate
        }}</mat-label>
        <mat-select formControlName="fill">
          <mat-option>
            {{ 'components.widget.settings.chart.auto' | translate }}
          </mat-option>
          <mat-option *ngFor="let type of fillTypes" [value]="type">
            {{ type }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <!-- Interpolation (line charts) -->
    <div class="flex flex-row justify-between">
      <mat-form-field
        *ngIf="formGroup.get('interpolation')"
        appearance="outline"
      >
        <mat-label>
          {{
            'components.widget.settings.chart.series.interpolation.title'
              | translate
          }}
        </mat-label>
        <mat-select formControlName="interpolation">
          <mat-option>
            {{ 'components.widget.settings.chart.auto' | translate }}
          </mat-option>
          <mat-option *ngFor="let type of interpolationTypes" [value]="type">
            {{ type }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field
        *ngIf="
          formGroup.value.interpolation === 'step' && formGroup.get('stepped')
        "
        appearance="outline"
      >
        <mat-label>
          {{
            'components.widget.settings.chart.series.interpolation.step'
              | translate
          }}
        </mat-label>
        <mat-select formControlName="stepped">
          <mat-option>
            {{ 'components.widget.settings.chart.auto' | translate }}
          </mat-option>
          <mat-option
            *ngFor="let type of stepInterpolationTypes"
            [value]="type"
          >
            {{ type }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <!-- Categories -->
    <safe-categories-settings
      *ngIf="formGroup.get('categories')"
      [formArray]="$any(formGroup.get('categories'))"
    >
    </safe-categories-settings>
  </div>
</div>
