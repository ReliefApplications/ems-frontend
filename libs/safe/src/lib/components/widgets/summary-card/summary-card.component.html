<div class="group flex-1">
  <kendo-tilelayout-item-header *ngIf="header" class="widget-header">
    <span class="widget-title" [title]="settings.title">{{
      settings.title
    }}</span>
    <!-- Switch between grid and cards view -->
    <div class="flex" *ngIf="settings.isDynamic === true">
      <ui-button
        [isIcon]="true"
        icon="grid_view"
        [disabled]="displayMode === 'cards'"
        (click)="displayMode = 'cards'"
        [uiTooltip]="'components.widget.summaryCard.viewAsCards' | translate"
      ></ui-button>
      <ui-button
        [isIcon]="true"
        icon="view_list"
        [disabled]="displayMode === 'grid'"
        (click)="displayMode = 'grid'"
        [uiTooltip]="'components.widget.summaryCard.viewAsGrid' | translate"
      ></ui-button>
    </div>
  </kendo-tilelayout-item-header>
  <ng-container *ngIf="displayMode === 'cards' || settings.isDynamic === false">
    <ui-button
      *ngIf="export && (displayMode === 'cards' || settings.isDynamic === false)"
      [isIcon]="true"
      icon="get_app"
      class="export-button"
      (click)="pdf.saveAs(exportName)"
    ></ui-button>
    <kendo-pdf-export #pdf paperSize="A4" margin="2cm" style="overflow: auto">
      <div
        #summaryCardGrid
        class="summary-card-container k-widget k-tile-layout k-grid-flow-col"
        style.grid-template-columns="{{ 'repeat(' + colsNumber + ', 1fr)' }}"
      >
        <safe-summary-card-item
          *ngFor="let card of cards; let i = index"
          class="k-tilelayout-item k-card"
          [style.order]="i"
          style.grid-column-end="{{
            'span ' + (card.width > colsNumber ? colsNumber : card.width)
          }}"
          style.grid-row-end="{{ 'span ' + card.height }}"
          [card]="card"
        >
        </safe-summary-card-item>
      </div>
    </kendo-pdf-export>
  </ng-container>
</div>

<ng-container *ngIf="displayMode === 'grid' && settings.isDynamic === true">
  <div class="summary-grid">
    <safe-grid-widget
      class="flex-auto max-h-full w-full"
      [header]="false"
      [settings]="gridSettings"
      [widget]="widget"
    ></safe-grid-widget>
  </div>
</ng-container>
