<div uiFormFieldDirective>
  <label *ngIf="!label">{{
    'components.aggregationBuilder.dataset.select' | translate
  }}</label>
  <label *ngIf="label">{{ label }}</label>
  <input
    type="text"
    [placeholder]="'common.placeholder.search' | translate"
    [formControl]="sourceFormControl"
    [uiAutocomplete]="auto"
    [autocompleteDisplayKey]="displayName.bind(this)"
    (opened)="onOpen()"
    (closed)="onClose()"
  />
  <ui-autocomplete #auto>
    <ui-option
      *ngFor="let form of filteredForms"
      [value]="form.id"
      [label]="form.name"
      class="form-option"
    >
      {{ form.name }}
      <ng-container ngProjectAs="icon">
        <ui-icon
          *ngIf="form.core"
          icon="storage"
          variant="primary"
          [size]="20"
        ></ui-icon>
        <!-- <ui-icon
        *ngIf="form.core"
        icon="storage"
        variant="primary"
        [size]="20"
      ></ui-icon> -->
      </ng-container>
    </ui-option>
  </ui-autocomplete>

  <ui-spinner [size]="'medium'" *ngIf="loadingMore" uiSuffix></ui-spinner>
</div>
