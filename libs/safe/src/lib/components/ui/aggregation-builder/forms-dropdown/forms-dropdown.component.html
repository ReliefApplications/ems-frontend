<div uiFormFieldDirective>
  <label *ngIf="!label">{{
    'components.aggregationBuilder.dataset.select' | translate
  }}</label>
  <label *ngIf="label">{{ label }}</label>
  <input
    type="text"
    [placeholder]="'common.placeholder.search' | translate"
    [formControl]="sourceFormControl"
    [matAutocomplete]="auto"
  />
  <mat-autocomplete
    autoActiveFirstOption
    #auto="matAutocomplete"
    [displayWith]="displayName.bind(this)"
    (opened)="onOpen()"
    (closed)="onClose()"
  >
    <mat-option
      *ngFor="let form of filteredForms"
      [value]="form.id"
      class="form-option"
    >
      {{ form.name }}
      <ui-icon
        *ngIf="form.core"
        icon="storage"
        variant="primary"
        [size]="20"
      ></ui-icon>
    </mat-option>
  </mat-autocomplete>
  <ui-spinner [size]="'medium'" *ngIf="loadingMore" uiSuffix></ui-spinner>
</div>
