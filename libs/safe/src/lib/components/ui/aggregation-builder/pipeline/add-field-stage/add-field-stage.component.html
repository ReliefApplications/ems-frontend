<form
  [formGroup]="$any(fieldForm)"
  class="flex flex-row"
  *ngFor="let fieldForm of form.controls; let index = index"
>
  <mat-form-field appearance="outline" *ngIf="displayName">
    <mat-label>{{ 'common.name' | translate }}</mat-label>
    <input matInput formControlName="name" />
  </mat-form-field>
  <safe-expressions
    [fields]="fields"
    [form]="$any(fieldForm.get('expression'))"
    [operators]="$any(operators)"
  ></safe-expressions>
  <safe-button
    class="mt-2.5 mr-2.5 mb-0 ml-0"
    [isIcon]="true"
    icon="delete"
    variant="danger"
    (click)="deleteField(index)"
  ></safe-button>
</form>
<safe-button icon="add" category="tertiary" (click)="addField()">
  {{ 'components.aggregationBuilder.addField' | translate }}
</safe-button>
