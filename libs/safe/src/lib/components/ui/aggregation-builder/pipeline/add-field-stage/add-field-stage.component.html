<form
  [formGroup]="$any(fieldForm)"
  class="flex flex-row"
  *ngFor="let fieldForm of form.controls; let index = index"
>
  <div uiFormFieldDirective [outline]="true" *ngIf="displayName">
    <label>{{ 'common.name' | translate }}</label>
    <input formControlName="name" [placeholder]="'common.name' | translate" />
  </div>
  <safe-expressions
    class="pl-4"
    [fields]="fields"
    [form]="$any(fieldForm.get('expression'))"
    [operators]="$any(operators)"
  ></safe-expressions>
  <ui-button
    class="mt-2.5 mr-2.5 mb-0 ml-0"
    [isIcon]="true"
    icon="delete"
    variant="danger"
    (click)="deleteField(index)"
  ></ui-button>
</form>
<ui-button icon="add" category="tertiary" (click)="addField()">
  {{ 'components.aggregationBuilder.addField' | translate }}
</ui-button>
