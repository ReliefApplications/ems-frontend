<div uiFormFieldDirective class="flex-1 w-44">
  <label>{{ label || 'common.field.one' | translate }}</label>
  <ui-select-menu [formControl]="fieldControl" [supplementaryOptions]="fieldComponents">
    <ui-select-option *ngIf="nullable">{{
      'common.input.none' | translate
    }}</ui-select-option>
    <ng-container
      *ngFor="let field of fields"
      [ngTemplateOutlet]="fieldNode"
      [ngTemplateOutletContext]="{ $implicit: field }"
    >
    </ng-container>
  </ui-select-menu>
</div>

<ng-template #fieldNode let-data let-parentName="parentName">
  <ui-select-option
    [value]="parentName ? parentName + '.' + data.name : data.name"
    *ngIf="data.type.kind === 'SCALAR'"
    #field
    >{{ data.name }}</ui-select-option
  >
  <ui-select-option [isGroup]="true" *ngIf="data.type.kind === 'LIST'">
    <span class="text-red-700 font-bold">{{ data.name }}</span>
    <ng-container
      *ngFor="let subField of data.fields"
      [ngTemplateOutlet]="fieldNode"
      [ngTemplateOutletContext]="{
        $implicit: subField,
        parentName: parentName ? parentName + '.' + data.name : data.name
      }"
    >
    </ng-container>
  </ui-select-option>
</ng-template>
