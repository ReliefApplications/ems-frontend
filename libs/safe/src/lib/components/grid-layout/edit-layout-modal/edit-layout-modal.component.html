<safe-modal [closable]="true" size="fullscreen">
  <!-- Modal title -->
  <h1 mat-dialog-title>
    {{ 'components.widget.settings.grid.layouts.edit.title' | translate }}
  </h1>
  <!-- Modal content -->
  <mat-dialog-content class="grow max-h-full" *ngIf="form">
    <form [formGroup]="form">
      <h2>{{ 'common.general' | translate }}</h2>
      <div class="flex flex-col">
        <!-- Title -->
        <div uiFormFieldDirective >
          <label>{{ 'common.title' | translate }}</label>
          <input formControlName="name" type="string" />
        </div>
        <!-- Query builder -->
        <safe-query-builder
          [form]="$any(form.controls.query)"
          [templates]="templates"
          [queryName]="data.queryName"
          [layoutPreviewData]="layoutPreviewData"
        ></safe-query-builder>
      </div>
    </form>
  </mat-dialog-content>
  <!-- Modal actions -->
  <mat-dialog-actions align="end">
    <ui-button mat-dialog-close>
      {{ 'common.close' | translate }}
    </ui-button>
    <ui-button
      category="secondary"
      variant="primary"
      (click)="onSubmit()"
      cdkFocusInitial
      [disabled]="!form || !form.valid"
    >
      {{ 'common.save' | translate }}
    </ui-button>
  </mat-dialog-actions>
</safe-modal>
