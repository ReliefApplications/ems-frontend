<div class="flex flex-col max-h-screen w-96 p-4 bg-white rounded-lg shadow-2xl">
  <div
    class="flex border-b border-gray-400 justify-between items-center font-bold pb-2"
  >
    {{ 'common.collaboration' | translate }}
    <div class="gap-x-1 flex">
      <ui-button
        [isIcon]="true"
        [size]="'small'"
        icon="check"
        (click)="resolveComments()"
        *ngIf="
          comments[selectedQuestion.name] &&
          comments[selectedQuestion.name].length > 0
        "
        [uiTooltip]="'Mark comments as resolved'"
      ></ui-button>
      <ui-button
        [isIcon]="true"
        [size]="'small'"
        [variant]="'grey'"
        icon="close"
        (click)="closeModal.emit('')"
        [uiTooltip]="'common.close' | translate"
      >
      </ui-button>
    </div>
  </div>
  <p class="italic text-primary-500">{{ selectedQuestion.title }}</p>
  <!-- Messages Section -->
  <div class="flex-1 overflow-y-auto mt-4 space-y-3 max-h-[calc(100vh-100px)]">
    <!-- Individual Messages -->
    <div class="mb-4" *ngFor="let comment of comments[selectedQuestion.name]">
      <span class="flex items-center">
        <p class="text-sm font-medium text-gray-900">
          {{ comment.createdBy?.name }}
        </p>
        <p
          [uiTooltip]="(comment.createdAt | date : 'medium') ?? ''"
          class="text-slate-400 pl-2 text-sm font-medium"
        >
          {{ getTimeAgo(comment.createdAt ?? 0) }}
        </p>
      </span>
      <p class="text-sm text-gray-700">{{ comment.message }}</p>
    </div>
  </div>

  <!-- Input Section -->
  <div class="mt-4 flex items-center border p-2 rounded-lg text-sm">
    <input
      type="text"
      [placeholder]="'models.comment.write' | translate"
      [formControl]="comment"
      class="flex-1"
    />
    <button (click)="addComment()">
      <ui-icon
        [ngClass]="{
          'text-primary-500': comment.value,
          'text-gray-300': !comment.value
        }"
        [uiTooltip]="'common.send' | translate"
        icon="circle-up"
        fontFamily="fa"
      />
    </button>
  </div>
</div>
