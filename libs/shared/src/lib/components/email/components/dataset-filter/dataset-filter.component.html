<form [formGroup]="query">
  <!-- Dataset Select -->
  <div class="mt-3 flex gap-5">
    <div class="w-1/3">
      <label
        class="block text-sm font-medium leading-6 text-gray-900"
        htmlFor="exampleSelect">
        {{ 'components.queryBuilder.block.label' | translate }}
      </label>
      <div
        class="relative flex py-1.5 px-2 focus-within:ring-2 focus-within:ring-inset focus-within:ring-primary-600 shadow-sm rounded-md border-0 ring-1 ring-inset ring-gray-300 items-center w-full"
        [class]="{'form-error': ((query?.controls['name'].value === null || query?.controls['name'].value === '') && query?.controls['name'].touched)}">
      <input
        id="block_title"
        class="form-input bg-transparent block overflow-hidden border-0 rounded-md w-full p-0 text-gray-900 placeholder:text-gray-400 text-sm sm:leading-6 focus:ring-0 focus:ring-inset ng-valid ng-dirty ng-touched"
        type="text"
        [placeholder]="'components.queryBuilder.block.label' | translate"
        formControlName="name"
        [ngModelOptions]="{ standalone: true }"
      />
      </div>
    </div>

    <div class="w-1/3">
      <label htmlFor="select__dataset" class="block text-sm font-medium leading-6 text-gray-900">
        {{ 'components.queryBuilder.dataset.title' | translate }}
      </label>
      <ng-select
        id="select__dataset"
        name="select__dataset"
        [ngModelOptions]="{ standalone: true }"
        #select
        [items]="emailService.resourcesNameId"
        bindLabel="name"
        [searchable]="true"
        bindValue="id"
        [(ngModel)]="selectedResourceId"
        [virtualScroll]="true"
        appendTo="body"
        (scrollToEnd)="getResourceDataOnScroll()"
        (change)="getResourceData(true)"
        placeholder="{{ 'components.queryBuilder.dataset.select' | translate }}"
      >
        <ng-template disabled selected>
          <span></span>
        </ng-template>
        <ng-template
          ng-option-tmp
          let-item="item"
          let-index="index"
          let-search="searchTerm"
        >
          <span>{{ this.emailService.replaceUnderscores(item.name || '') | titlecase }}</span>
        </ng-template>
      </ng-select>
    </div>
    <div class="w-1/3 flex loadingSign">
      <ui-spinner *ngIf="loading" style="position: relative;"></ui-spinner>
    </div>
  </div>
  <kendo-tabstrip (tabSelect)="onTabSelect($event)" #datasetPreview *ngIf="resource?.fields?.length">
    <!-- Filter Tab -->
    <kendo-tabstrip-tab  [title]="'Filter'" [disabled]="false" *ngIf="showPreview === false" [selected]="true">
      <ng-template kendoTabTitle>
        {{ 'components.queryBuilder.filter.title' | translate }}
      </ng-template>
      <ng-template kendoTabContent>
        <ng-container class="mt-2" *ngTemplateOutlet="datasetAlert"></ng-container>
        <ng-container *ngIf="resource?.fields?.length">
          <div class="flex gap-4 mt-2">
            <div class="mt-2">
              <!-- Label for Filter Logic -->
              <div>
                <label class="block text-sm font-medium leading-6 text-gray-900">{{ 'components.queryBuilder.filter.logic' | translate }}</label>
              </div>

              <div class="flex items-center gap-5 mt-1">
                <!-- Filter Logic -->
                <div formGroupName="filter" uiFormFieldDirective [defaultMargin]="false" class="w-28">
                  <ui-select-menu formControlName="logic">
                    <ui-select-option value="or">
                      {{ 'components.queryBuilder.filter.or' | translate }}
                    </ui-select-option>
                    <ui-select-option value="and">
                      {{ 'components.queryBuilder.filter.and' | translate }}
                    </ui-select-option>
                  </ui-select-menu>
                </div>

                <!-- Filter Row Button -->
                <ui-button category="tertiary" (click)="addNewDatasetFilter()">
                  {{ 'components.queryBuilder.filter.new' | translate }}
                </ui-button>

              </div>
            </div>
          </div>
          <div formGroupName="filter">
            <div formArrayName="filters">
              <div
                *ngFor="
                  let data of datasetFilterInfo.controls;
                  let fieldIndex = index
                "
              >
                <div class="flex gap-5 ml-6" [formGroupName]="fieldIndex">
                  <!-- Filter Field -->
                  <div
                    uiFormFieldDirective
                    [defaultMargin]="false"
                    class="mt-4 w-1/3">
                    <label
                      htmlFor="exampleSelect"
                    >
                      {{ 'components.queryBuilder.filter.field' | translate }}
                    </label>
                    <ui-select-menu
                      id="exampleSelect"
                      name="exampleSelect"
                      [filterable]="true"
                      (ngModelChange)="setField($event, fieldIndex)"
                      formControlName="field"
                    >
                      <ng-container
                        *ngFor="let fieldDetails of filterFields"
                      >
                        <ui-select-option [value]="fieldDetails?.name">
                          {{
                            this.emailService.replaceUnderscores(fieldDetails.name) | titlecase
                          }}
                        </ui-select-option>
                      </ng-container>
                    </ui-select-menu>
                  </div>
                  <!-- Filter Operator -->
                  <div
                    uiFormFieldDirective
                    [defaultMargin]="false"
                    class="mt-4 w-1/3"
                    *ngIf="operators?.[fieldIndex]">
                    <label>{{ 'components.queryBuilder.filter.operator' | translate }}</label>
                    <ui-select-menu
                    formControlName="operator"
                    (ngModelChange)="onOperatorChange($event, data)">
                      <ui-select-option
                        *ngFor="let operatorDetail of operators[fieldIndex]"
                        [value]="operatorDetail.value"
                      >
                        {{ operatorDetail.label | translate | titlecase }}
                      </ui-select-option>
                    </ui-select-menu>
                  </div>
                  <!-- Filter Value -->
                  <div
                  class="mt-4 w-1/3"
                  *ngIf="operators?.[fieldIndex] && !data.get('hideEditor')?.value"

                  >
                  <!-- Text Input for non-date/datetime fields -->
                  <ng-container *ngIf="!isDateOrDatetimeOperator(fieldIndex) && !isNumericOperator(fieldIndex)">
                    <div uiFormFieldDirective [defaultMargin]="false">
                      <label>{{ 'common.value.one' | translate }}</label>
                      <input formControlName="value" type="text"placeholder="Enter the value" />
                    </div>
                  </ng-container>
                  <!-- Numeric Input -->
                  <ng-container *ngIf="isNumericOperator(fieldIndex)" #numericEditor>
                    <div uiFormFieldDirective [defaultMargin]="false">
                      <label>{{ 'common.value.one' | translate }}</label>
                      <input formControlName="value" type="number" />
                    </div>
                  </ng-container>
                  <!-- Date / DateTime picker or within the Last... picker -->
                  <ng-container *ngIf="isDateOrDatetimeOperator(fieldIndex)">
                    <!-- Date Picker -->
                    <div uiFormFieldDirective [defaultMargin]="false" *ngIf="getFieldType(fieldIndex) === 'date' && data.get('operator')?.value !== 'inthelast'">
                      <label class="block text-gray-700 text-sm">{{ 'components.queryBuilder.filter.value' | translate }}</label>
                      <div class="grid grid-cols-6 gap-2">
                        <!-- Conditional rendering based on useExpression -->
                        <ng-container *ngIf="!useExpression; else textInput">
                          <div [uiDateWrapper]="calendar" class="col-span-5">
                            <input
                              [uiDatePicker]
                              formControlName="value"
                              [label]="'kendo.datepicker.dateLabel' | translate"
                              class="w-full"
                            />
                            <ui-date-picker #calendar></ui-date-picker>
                          </div>
                        </ng-container>
                        <ng-template #textInput>
                          <input
                            uiTooltip="YYYY/MM/DD"
                            formControlName="value"
                            type="text"
                            placeholder="YYYY/MM/DD"
                            class="col-span-5 w-full"
                          />
                        </ng-template>

                        <!-- Date and text Button -->
                        <div class="col-span-1">
                          <ui-button
                            [isIcon]="true"
                            icon="change_circle_outline"
                            variant="primary"
                            (click)="changeEditor()"
                            [uiTooltip]="
                              (useExpression
                                ? 'components.queryBuilder.tooltip.filter.date.usePicker'
                                : 'components.queryBuilder.tooltip.filter.date.useExpression'
                              ) | translate
                            "
                            class="w-full"
                          ></ui-button>
                        </div>
                      </div>
                    </div>
                     <!-- Date Time Picker -->
                     <div uiFormFieldDirective [defaultMargin]="false" *ngIf="(getFieldType(fieldIndex) === 'datetime' || getFieldType(fieldIndex) === 'datetime-local') && data.get('operator')?.value !== 'inthelast'">
                      <label class="block text-gray-700 text-sm">{{ 'components.queryBuilder.filter.value' | translate }}</label>
                      <div class="grid grid-cols-6 gap-2">
                        <ng-container *ngIf="!useExpression; else textInput">
                          <div [uiDateWrapper]="calendar" class="col-span-5">
                            <input
                              [uiDatePicker]
                              formControlName="value"
                              [label]="'kendo.datepicker.dateLabel' | translate"
                              class="w-full"
                            />
                            <ui-date-picker #calendar></ui-date-picker>
                          </div>
                        </ng-container>
                        <ng-template #textInput>
                          <input
                            uiTooltip="YYYY/MM/DD"
                            formControlName="value"
                            type="text"
                            placeholder="YYYY/MM/DD"
                            class="col-span-5 w-full"
                          />
                        </ng-template>

                        <!-- Date to text Button -->
                        <div class="col-span-1">
                          <ui-button
                            [isIcon]="true"
                            icon="change_circle_outline"
                            variant="primary"
                            (click)="changeEditor()"
                            [uiTooltip]="
                              (useExpression
                                ? 'components.queryBuilder.tooltip.filter.date.usePicker'
                                : 'components.queryBuilder.tooltip.filter.date.useExpression'
                              ) | translate
                            "
                            class="w-full"
                          ></ui-button>
                        </div>
                      </div>
                    </div>
                    <!-- within the Last... picker -->
                    <div
                      *ngIf="data.get('operator')?.value === 'inthelast'"
                      formGroupName="inTheLast"
                      class="flex">
                      <div
                      uiFormFieldDirective
                      [defaultMargin]="false"
                      class="mr-2">
                        <label>Number</label>
                        <ui-select-menu
                          formControlName="number"
                          >
                          <ui-select-option
                            *ngFor="let num of getNumbersArray()"
                            [value]="num">
                            {{ num }}
                          </ui-select-option>
                        </ui-select-menu>
                      </div>
                      <div
                        uiFormFieldDirective
                        [defaultMargin]="false"
                      >
                        <label>Unit</label>
                        <ui-select-menu formControlName="unit">
                          <ng-container *ngFor="let timeUnit of timeUnits">
                            <ui-select-option [value]="timeUnit.value">
                              {{ timeUnit.label }}
                            </ui-select-option>
                          </ng-container>
                        </ui-select-menu>
                      </div>
                    </div>
                    <div
                      *ngIf="data.get('operator')?.value === 'inthelast'" [hidden]="true">
                      <input
                        formControlName="value"
                        type="text"
                      />
                    </div>
                  </ng-container>
                  </div>
                  <button
                    class="ui-button-icon primary medium button-danger mt-8"
                    (click)="deleteDatasetFilter(fieldIndex)"
                  >
                    <ui-icon class="text-3xl" icon="delete" variant="danger"> </ui-icon>
                  </button>
                </div>
              </div>
            </div>
          </div>

          <button
            *ngIf="datasetFilterInfo.controls && showDatasetLimitWarning"
            type="button"
            (click)="getDataSet('filter')"
            class="bg-sky-600 float-right hover:bg-sky-800 text-white ml-3 px-4 py-2 rounded-md transition-colors duration-150 ease-in-out mt-2"
          >
            <ui-icon class="text-3xl" icon="check" variant="light"> </ui-icon>
          </button>
          <button
          *ngIf="datasetFilterInfo.controls && !showDatasetLimitWarning"
          type="button"
          (click)="getDataSet('filter')"
          class="bg-sky-600 float-right hover:bg-sky-800 text-white ml-3 px-4 py-2 rounded-md transition-colors duration-150 ease-in-out mt-2 btn-width"
        >
          {{ 'components.queryBuilder.filter.apply' | translate }}
        </button>
        </ng-container>
      </ng-template>
    </kendo-tabstrip-tab>
    <!-- Fields Tab -->
    <kendo-tabstrip-tab [title]="'Fields'" [disabled]="showDatasetLimitWarning" *ngIf="showPreview === false">
      <ng-template kendoTabTitle>
        {{ 'components.queryBuilder.fields.title' | translate }}
      </ng-template>
      <ng-template kendoTabContent>
        <ng-container class="mt-2" *ngTemplateOutlet="datasetAlert"></ng-container>
        <ng-container>
          <div class="flex gap-5">
            <!-- Available Fields -->
            <div class="mt-4 w-1/2">
              <label
                htmlFor="exampleSelect"
                class="block text-gray-700 text-sm mb-1"
              >
                {{ 'components.queryBuilder.fields.available' | translate }}
              </label>
              <div uiFormFieldDirective class="!w-full divFields">
                <input
                  id="searchBar"
                  type="text"
                  [(ngModel)]="searchAvailableField"
                  [ngModelOptions]="{ standalone: true }"
                  placeholder="{{ 'components.queryBuilder.fields.search' | translate }}"
                />
                <ui-button
                  uiSuffix
                  (click)="searchAvailableField = ''"
                  [isIcon]="true"
                  [icon]="searchAvailableField ? 'cancel' : 'search'"
                  [uiTooltip]="
                    'common.' + (searchAvailableField ? 'cancel' : 'search') | translate
                  "
                ></ui-button>
              </div>
              <div class="field-list overflow-auto max-h-[400px]">
                <ng-container *ngFor="let fieldDetails of availableFields">
                  <div
                    *ngIf="fieldDetails?.name?.toLowerCase()?.includes(searchAvailableField.toLowerCase())"
                    class="field-box cursor-pointer hover:bg-blue-500 hover:text-white"
                    (click)="addSelectedFields(fieldDetails)"
                  >
                    {{ this.emailService.replaceUnderscores(removeUserString(fieldDetails?.name)) | titlecase }}
                    <!-- <ui-icon icon="arrow_right" variant="grey" class="text-gray-500 hover:text-white"></ui-icon> -->
                  </div>
                </ng-container>
              </div>
            </div>

            <!-- Selected Fields -->
            <div class="mt-4 w-1/2">
              <label
                htmlFor="exampleSelect"
                class="block text-gray-700 text-sm mb-1"
              >
                {{ 'components.queryBuilder.fields.selected' | translate }}
              </label>
              <div uiFormFieldDirective class="!w-full divFields">
                <input
                  id="searchBarSelected"
                  type="text"
                  [(ngModel)]="searchSelectedField"
                  [ngModelOptions]="{ standalone: true }"
                  placeholder="{{ 'components.queryBuilder.fields.search' | translate }}"
                />
                <ui-button
                  uiSuffix
                  (click)="searchSelectedField = ''"
                  [isIcon]="true"
                  [icon]="searchSelectedField ? 'cancel' : 'search'"
                  [uiTooltip]="
                    'common.' + (searchSelectedField ? 'cancel' : 'search') | translate
                  "
                ></ui-button>
              </div>
              <div class="field-list overflow-auto max-h-[400px]">
                <ng-container *ngFor="let fields of selectedFields; let index = index">
                  <div
                    *ngIf="fields?.name?.toLowerCase()?.includes(searchSelectedField.toLowerCase())"
                    class="field-box cursor-pointer hover:bg-blue-500 hover:text-white"
                    (click)="removeSelectiveFields(fields)"
                  >
                    <!-- <ui-icon icon="arrow_left" variant="grey" class="text-gray-500"></ui-icon> -->
                    {{ this.emailService.replaceUnderscores(removeUserString(fields.name)) | titlecase }}
                  </div>
                </ng-container>
              </div>
            </div>
          </div>
        </ng-container>
        <button
        *ngIf="tabs?.length > 1 && datasetFilterInfo.controls && activeTab.index !== tabs.length-1"
        type="button"
        (click)="getDataSet('fields')"
        class="text-white text-sm float-right block mt-2 w-24 rounded-md bg-sky-600 hover:bg-sky-700 px-4 py-2 transition-colors duration-150 ease-in-out btn-width"
      >
        {{ 'components.queryBuilder.filter.apply' | translate }}
      </button>
        <button
        *ngIf="tabs?.length === 1 || activeTab?.index === tabs?.length-1"
        type="button"
        (click)="getDataSet('preview');showPreview=true"
        [disabled]="showDatasetLimitWarning"
        [class.disabled-button]="showDatasetLimitWarning"
        class="text-white text-sm float-right block mt-2 w-24 rounded-md bg-sky-600 hover:bg-sky-700 px-4 py-2 transition-colors duration-150 ease-in-out"
      >
        {{ 'common.preview' | translate }}
      </button>
      </ng-template>
    </kendo-tabstrip-tab>
    <!-- Style Tab -->
    <kendo-tabstrip-tab [disabled]="true"  *ngIf="showPreview === false">
      <ng-template kendoTabTitle>
        {{ 'components.queryBuilder.style.title' | translate }}
      </ng-template>
      <ng-template kendoTabContent>
        <ng-container>
          <div>
            <div class="block mt-8 text-gray-700 font-bold text-xs">
              Block Style
            </div>
            <div>
              <div class="h-14 w-full bg-blue-50">
                <div class="mt-3 flex gap-3">
                  <div class="mt-1">
                    <label
                      htmlFor="exampleSelect"
                      class="block text-gray-700 mt-1 text-xs"
                    >
                      Font Size
                    </label>
                    <button
                      type="button"
                      class="mt-1 text-xs text-left block w-24 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                    >
                      16px
                    </button>
                  </div>
                  <div class="mt-1">
                    <label
                      htmlFor="exampleSelect"
                      class="block text-gray-700 mt-1 text-xs"
                    >
                      Background Color
                    </label>
                    <button
                      type="button"
                      class="mt-1 text-xs text-left block w-24 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                    >
                      16px
                    </button>
                  </div>
                  <div class="mt-1">
                    <label
                      htmlFor="exampleSelect"
                      class="block text-gray-700 mt-1 text-xs"
                    >
                      Text Color
                    </label>
                    <button
                      type="button"
                      class="mt-1 text-xs text-left block w-24 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                    >
                      16px
                    </button>
                  </div>

                  <div class="mt-1">
                    <label
                      htmlFor="exampleSelect"
                      class="block text-gray-700 mt-1 text-xs"
                    >
                      Text Style
                    </label>
                    <div class="flex gap-3">
                      <button
                        type="button"
                        class="mt-1 text-xs text-left block w-8 py-1 px-2 border border-gray-300 bg-white font-bold unded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                      >
                        B
                      </button>

                      <button
                        type="button"
                        class="mt-1 text-xs text-left block w-8 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                      >
                        I
                      </button>

                      <button
                        type="button"
                        class="mt-1 text-xs text-left block w-8 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none underline ocus:ring-indigo-500 focus:border-indigo-500"
                      >
                        U
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="flex gap-3">
            <div class="mt-4">
              <label
                htmlFor="exampleSelect"
                class="block text-gray-700 text-sm"
              >
                Title*
              </label>
              <button
                type="button"
                class="mt-1 text-xs text-left block w-52 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
              >
                Title
              </button>
            </div>
            <div>
              <button
                type="button"
                class="mt-9 text-xs text-left block w-24 py-1 px-2 text-white order border-gray-300 bg-blue-600 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
              >
                Add Field
              </button>
            </div>
          </div>

          <div class="h-14 w-full bg-gray-50">
            <div class="mt-4 flex gap-3">
              <div class="mt-1">
                <label
                  htmlFor="exampleSelect"
                  class="block text-gray-700 mt-1 text-xs"
                >
                  Select Field
                </label>
                <button
                  type="button"
                  class="mt-1 text-xs text-left block w-48 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                >
                  Single Id
                </button>
              </div>
              <div class="mt-1">
                <label
                  htmlFor="exampleSelect"
                  class="block text-gray-700 mt-1 text-xs"
                >
                  Font Size
                </label>
                <button
                  type="button"
                  class="mt-1 text-xs text-left block w-24 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                >
                  16px
                </button>
              </div>
              <div class="mt-1">
                <label
                  htmlFor="exampleSelect"
                  class="block text-gray-700 mt-1 text-xs"
                >
                  Background Color
                </label>
                <button
                  type="button"
                  class="mt-1 text-xs text-left block w-24 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                >
                  16px
                </button>
              </div>
              <div class="mt-1">
                <label
                  htmlFor="exampleSelect"
                  class="block text-gray-700 mt-1 text-xs"
                >
                  Text Color
                </label>
                <button
                  type="button"
                  class="mt-1 text-xs text-left block w-24 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                >
                  16px
                </button>
              </div>

              <div class="mt-1">
                <label
                  htmlFor="exampleSelect"
                  class="block text-gray-700 mt-1 text-xs"
                >
                  Text Style
                </label>
                <div class="flex gap-3">
                  <button
                    type="button"
                    class="mt-1 text-xs text-left block w-8 py-1 px-2 border border-gray-300 bg-white font-bold unded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                  >
                    B
                  </button>

                  <button
                    type="button"
                    class="mt-1 text-xs text-left block w-8 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                  >
                    I
                  </button>

                  <button
                    type="button"
                    class="mt-1 text-xs text-left block w-8 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none underline ocus:ring-indigo-500 focus:border-indigo-500"
                  >
                    U
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="h-14 w-full bg-gray-50">
            <div class="mt-4 flex gap-3">
              <div class="mt-1">
                <label
                  htmlFor="exampleSelect"
                  class="block text-gray-700 mt-1 text-xs"
                >
                  Select Field
                </label>
                <button
                  type="button"
                  class="mt-1 text-xs text-left block w-48 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                >
                  Single Id
                </button>
              </div>
              <div class="mt-1">
                <label
                  htmlFor="exampleSelect"
                  class="block text-gray-700 mt-1 text-xs"
                >
                  Font Size
                </label>
                <button
                  type="button"
                  class="mt-1 text-xs text-left block w-24 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                >
                  16px
                </button>
              </div>
              <div class="mt-1">
                <label
                  htmlFor="exampleSelect"
                  class="block text-gray-700 mt-1 text-xs"
                >
                  Background Color
                </label>
                <button
                  type="button"
                  class="mt-1 text-xs text-left block w-24 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                >
                  16px
                </button>
              </div>
              <div class="mt-1">
                <label
                  htmlFor="exampleSelect"
                  class="block text-gray-700 mt-1 text-xs"
                >
                  Text Color
                </label>
                <button
                  type="button"
                  class="mt-1 text-xs text-left block w-24 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                >
                  16px
                </button>
              </div>
              <div class="mt-1">
                <label
                  htmlFor="exampleSelect"
                  class="block text-gray-700 mt-1 text-xs"
                >
                  Text Style
                </label>
                <div class="flex gap-3">
                  <button
                    type="button"
                    class="mt-1 text-xs text-left block w-8 py-1 px-2 border border-gray-300 bg-white font-bold unded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                  >
                    B
                  </button>

                  <button
                    type="button"
                    class="mt-1 text-xs text-left block w-8 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"
                  >
                    I
                  </button>

                  <button
                    type="button"
                    class="mt-1 text-xs text-left block w-8 py-1 px-2 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none underline ocus:ring-indigo-500 focus:border-indigo-500"
                  >
                    U
                  </button>
                </div>
              </div>
            </div>
          </div>
        </ng-container>
      </ng-template>
    </kendo-tabstrip-tab>
  </kendo-tabstrip>
  <div *ngIf="query?.value?.resource !== null && !resource?.fields?.length" class="mt-5">
    {{showErrorMessage}}
  </div>

</form>
<ng-template #datasetAlert>
  <ui-alert variant="warning" *ngIf="showDatasetLimitWarning">
    At this moment, we are limited to fetch only 50 records.
    Based on the provided filter conditions there are <strong>{{totalMatchingRecords}}</strong> matching records.
    Kindly add some additional filters to bring the record count less than or equals to 50.
  </ui-alert>
</ng-template>
