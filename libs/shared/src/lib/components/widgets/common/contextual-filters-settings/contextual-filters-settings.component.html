<div class="flex flex-col gap-4 h-full">
  <!-- Historical date (version at) -->
  <div class="flex flex-col">
    <h2 class="flex">
      {{ 'models.dashboard.historicalDate' | translate }}
      <ui-icon
        icon="info_outline"
        class="cursor-pointer ml-2 self-center"
        variant="grey"
        [size]="18"
        uiSuffix
        [uiTooltip]="'models.dashboard.tooltip.historicalDate' | translate"
      ></ui-icon>
    </h2>
    <div uiFormFieldDirective>
      <input [formControl]="$any(form.get('at'))" type="string" />
    </div>
  </div>
  <!-- Dashboard filter -->
  <div class="flex-1 flex flex-col" >  <!-- create a variable to control this-->
    <h2 class="flex">
      {{ 'models.dashboard.dashboardFilter' | translate
      }}<ui-icon
        icon="info_outline"
        class="cursor-pointer ml-2 self-center"
        variant="grey"
        [size]="18"
        uiSuffix
        [uiTooltip]="'models.dashboard.tooltip.dashboardFilter' | translate"
      ></ui-icon>
    </h2>
    <ng-container ngProjectAs="content">
      <ng-container *ngIf="!loading; else loadingTmpl">
        <div class="flex flex-col">
          <shared-query-builder
            [form]="$any(form.get('dashboardFilters'))"
            [canSelectDataSet]="false"
            [showStyle]="false"
            [showSort]="false"
            [showFields]="false"
          ></shared-query-builder>
        </div>
      </ng-container>
      <ng-template #loadingTmpl>
        <div class="w-full h-full flex">
          <ui-spinner class="my-auto mx-auto" [size]="'large'"></ui-spinner>
        </div>
      </ng-template>
    </ng-container>
  </div>
</div>
