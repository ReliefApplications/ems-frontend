<div class="flex flex-wrap gap-4 flex-col lg:flex-row lg:h-full">
  <!-- Aggregation form -->
  <div [formGroup]="formGroup" class="flex-1">
    <div uiFormFieldDirective>
      <label>{{
        'components.widget.settings.map.edit.reduction.reduction' | translate
      }}</label>
      <ui-select-menu formControlName="type">
        <ui-select-option>{{
          'components.widget.settings.map.edit.reduction.noReduction'
            | translate
        }}</ui-select-option>
        <ui-select-option *ngFor="let type of reductionTypes" [value]="type"
          >{{ type }}
        </ui-select-option>
      </ui-select-menu>
    </div>
    <div class="flex flex-col" [ngSwitch]="formGroup.value.type">
      <div *ngSwitchCase="'cluster'">
        <ng-container *ngTemplateOutlet="clusterRenderer"></ng-container>
      </div>
    </div>
  </div>
  <!-- Map -->
  <div class="lg:flex-1 max-lg:min-w-full h-80 lg:h-[400px] flex-shrink-0">
    <ng-template #mapContainer></ng-template>
  </div>
</div>

<ng-template #clusterRenderer>
  <shared-layer-cluster [formGroup]="formGroup"></shared-layer-cluster>
</ng-template>
