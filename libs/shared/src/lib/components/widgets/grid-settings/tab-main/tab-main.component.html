<div [formGroup]="formGroup" class="flex flex-col">
  <h2>{{ 'common.general' | translate }}</h2>
  <!-- Widget title -->
  <div uiFormFieldDirective>
    <label>{{ 'common.title' | translate }}</label>
    <input formControlName="title" type="string" />
  </div>

  <!-- Set aggregation origin and select aggregation template-->
  <shared-aggregation-origin-select
    [selectedResource]="resource"
    [resourcesQueryValue]="getResources"
  ></shared-aggregation-origin-select>
</div>
<div class="flex flex-col mt-8 gap-8" *ngIf="form || resource || referenceData">
  <!-- Aggregations -->
  <div *ngIf="!(formGroup.get('layouts')?.value.length > 0)">
    <h2>
      {{ 'components.widget.settings.grid.aggregations.title' | translate }}
    </h2>
    <shared-aggregation-table
      [canAdd]="formGroup.get('aggregations')?.value.length === 0"
      [resource]="resource"
      [referenceData]="referenceData"
      [selectedAggregations]="$any(formGroup).get('aggregations')"
    ></shared-aggregation-table>
  </div>
  <ui-divider
    *ngIf="
      !(formGroup.get('layouts')?.value.length > 0) &&
      !(formGroup.get('aggregations')?.value.length > 0) &&
      (form || resource)
    "
    [text]="'common.or' | translate"
  ></ui-divider>
  <!-- Layouts -->
  <div
    *ngIf="
      !(formGroup.get('aggregations')?.value.length > 0) && (form || resource)
    "
  >
    <h2>
      {{ 'components.widget.settings.grid.layouts.title' | translate }}
    </h2>
    <shared-layout-table
      [form]="form"
      [resource]="resource"
      [selectedLayouts]="$any(formGroup).get('layouts')"
    ></shared-layout-table>
  </div>
</div>
