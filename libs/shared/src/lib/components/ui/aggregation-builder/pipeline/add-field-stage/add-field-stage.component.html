<form
  [formGroup]="$any(fieldForm)"
  class="flex flex-row items-end gap-4"
  *ngFor="let fieldForm of form.controls; let index = index"
>
  <div
    uiFormFieldDirective
    [defaultMargin]="false"
    *ngIf="displayName"
    class="w-44"
  >
    <label>{{ 'common.name' | translate }}</label>
    <input formControlName="name" [placeholder]="'common.name' | translate" />
  </div>
  <shared-expressions
    [fields]="fields"
    [form]="$any(fieldForm.get('expression'))"
    [operators]="$any(operators)"
  ></shared-expressions>
  <ui-button
    [isIcon]="true"
    icon="delete"
    variant="danger"
    (click)="deleteField(index)"
    [uiTooltip]="'common.delete' | translate"
  ></ui-button>
</form>
<ui-button
  class="mt-4 w-max"
  icon="add"
  category="tertiary"
  (click)="addField()"
>
  {{ 'components.aggregationBuilder.addField' | translate }}
</ui-button>
