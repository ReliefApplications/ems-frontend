<ng-container
  *ngIf="
    activitiesLogs.length > 0 && displayedColumns.length > 0;
    else emptyTmpl
  "
>
  <div class="overflow-x-auto">
    <!-- List of activity logs -->
    <table cdk-table uiTableWrapper [dataSource]="activitiesLogs">
      <ng-container cdkColumnDef="userId">
        <th uiCellHeader *cdkHeaderCellDef scope="col">
          <span>{{
            'components.application.activities.userId' | translate
          }}</span>
        </th>
        <td uiCell *cdkCellDef="let activity">
          {{ activity.userId }}
        </td>
      </ng-container>
      <ng-container cdkColumnDef="username">
        <th uiCellHeader *cdkHeaderCellDef scope="col">
          <span>{{ 'common.email.one' | translate }}</span>
        </th>
        <td uiCell *cdkCellDef="let activity">
          {{ activity.username }}
        </td>
      </ng-container>
      <ng-container
        *ngFor="let attribute of attributes"
        [cdkColumnDef]="attribute.value"
      >
        <th uiCellHeader *cdkHeaderCellDef scope="col">
          <span>{{ attribute.text }}</span>
        </th>
        <td uiCell *cdkCellDef="let activity">
          {{ activity.attributes?.[attribute.value] }}
        </td>
      </ng-container>
      <ng-container cdkColumnDef="url">
        <th uiCellHeader *cdkHeaderCellDef scope="col">
          <span>{{ 'components.application.activities.url' | translate }}</span>
        </th>
        <td uiCell *cdkCellDef="let activity">
          {{ activity.url }}
        </td>
      </ng-container>
      <tr cdk-header-row *cdkHeaderRowDef="displayedColumns"></tr>
      <tr cdk-row *cdkRowDef="let row; columns: displayedColumns"></tr>
    </table>
  </div>
</ng-container>
<ng-template #emptyTmpl>
  <!-- Empty indicator -->
  <shared-empty
    [title]="'components.application.activities.empty' | translate"
  ></shared-empty>
</ng-template>
<div>
  <ui-button
    category="secondary"
    variant="primary"
    (click)="downloadActivities()"
  >
    {{ 'components.application.activities.downloadXlsx' | translate }}
  </ui-button>
</div>
