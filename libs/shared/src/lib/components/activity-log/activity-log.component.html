<div class="flex flex-wrap justify-between items-end mb-3">
  <div class="flex flex-wrap gap-2 items-end">
    <!-- Date range filter -->
    <div uiFormFieldDirective [defaultMargin]="false">
      <label>{{ 'common.input.dateRange' | translate }}</label>
      <div [formGroup]="filterForm" [uiDateWrapper]="calendar">
        <input
          [uiDatePicker]
          formControlName="startDate"
          [label]="'kendo.datepicker.startLabel' | translate"
        />
        <input
          [uiDatePicker]
          formControlName="endDate"
          [label]="'kendo.datepicker.endLabel' | translate"
        />
        <ui-date-range #calendar> </ui-date-range>
      </div>
    </div>
    <ui-button variant="danger" (click)="clear()" class="max-sm:!w-auto">{{
      'common.filter.clear' | translate
    }}</ui-button>
  </div>
  <ui-button
    category="secondary"
    variant="primary"
    (click)="downloadActivities()"
  >
    {{ 'components.application.activities.downloadXlsx' | translate }}
  </ui-button>
</div>
<!-- Table container -->
<div class="overflow-x-hidden shadow-2lg">
  <!-- Table scroll container -->
  <div class="overflow-x-auto">
    <!-- Loading indicator -->
    <ng-container *ngIf="loading; else dataTmpl">
      <shared-skeleton-table [columns]="displayedColumns" [actions]="true">
      </shared-skeleton-table>
    </ng-container>
    <ng-template #dataTmpl>
      <ng-container *ngIf="activitiesLogs.length > 0; else emptyTmpl">
        <table cdk-table uiTableWrapper [dataSource]="activitiesLogs">
          <ng-container cdkColumnDef="userId">
            <th uiCellHeader *cdkHeaderCellDef scope="col">
              <span>{{
                'components.application.activities.userId' | translate
              }}</span>
            </th>
            <td uiCell *cdkCellDef="let activity">
              {{ activity.userId }}
            </td>
          </ng-container>
          <ng-container cdkColumnDef="eventType">
            <th uiCellHeader *cdkHeaderCellDef scope="col">
              <span></span>
              <span>{{
                'components.application.activities.eventType' | translate
              }}</span>
            </th>
            <td uiCell *cdkCellDef="let activity">
              {{ activity.eventType }}
            </td>
          </ng-container>
          <ng-container cdkColumnDef="url">
            <th uiCellHeader *cdkHeaderCellDef scope="col">
              <span>{{
                'components.application.activities.url' | translate
              }}</span>
            </th>
            <td uiCell *cdkCellDef="let activity">
              {{ activity.url }}
            </td>
          </ng-container>
          <tr cdk-header-row *cdkHeaderRowDef="displayedColumns"></tr>
          <tr cdk-row *cdkRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </ng-container>
      <ng-template #emptyTmpl>
        <!-- Empty indicator -->
        <div class="flex items-center justify-center h-64">
          <ui-icon icon="info" variant="grey" class="w-12 h-12"></ui-icon>
          <span class="ml-4 text-gray-500">{{
            'components.application.activities.empty' | translate
          }}</span>
        </div>
      </ng-template>
    </ng-template>
  </div>
</div>
