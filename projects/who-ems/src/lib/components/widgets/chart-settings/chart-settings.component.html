<ng-container *ngIf="tileForm">
    <form [formGroup]="tileForm">
        <div class="form-group">
            <div class="form-group-title">General</div>
            <mat-form-field appearance="outline">
                <mat-label>Title</mat-label>
                <input matInput formControlName="title" type="string" />
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Chart Type</mat-label>
                <mat-select formControlName="type">
                    <mat-select-trigger><mat-icon inline="true" class="chart-icon">{{type.icon}}</mat-icon>{{type.name | uppercase }}</mat-select-trigger>
                    <mat-option *ngFor="let type of types" [value]="type.name">
                        <mat-icon>{{type.icon}}</mat-icon> {{type.name | uppercase }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div class="form-group" *ngIf="tileForm">
            <div class="form-group-title">Data set selection</div>
            <who-query-builder [form]="tileForm.controls.query" [settings]="tile.settings" [canExpand]="false"></who-query-builder>
            <ng-container *ngIf="selectedFields.length > 0">
                <mat-form-field appearance="outline">
                    <mat-label>X-Axis</mat-label>
                    <mat-select formControlName="xAxis">
                        <mat-option *ngFor="let field of selectedFields" [value]="field">
                            {{field}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                <mat-form-field appearance="outline">
                    <mat-label>Y-Axis</mat-label>
                    <mat-select formControlName="yAxis">
                        <mat-option *ngFor="let field of selectedFields" [value]="field">
                            {{field}}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
            </ng-container>
        </div>
    </form>
</ng-container>