<safe-modal size="medium">
  <h1 mat-dialog-title>
    {{
      (data
        ? 'components.templates.edit.update'
        : 'components.templates.edit.new'
      ) | translate
    }}
  </h1>
  <div mat-dialog-content>
    <form [formGroup]="form" class="flex flex-col">
      <div class="flex gap-2">
        <mat-form-field appearance="outline" class="flex-1">
          <mat-label>{{
            'components.templates.type.title' | translate
          }}</mat-label>
          <mat-select formControlName="type" [disabled]="true">
            <mat-option value="email">{{
              'components.templates.type.email' | translate
            }}</mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field appearance="outline" class="flex-1">
          <mat-label>{{
            'components.templates.edit.name' | translate
          }}</mat-label>
          <input matInput formControlName="name" type="text" />
        </mat-form-field>
      </div>
      <mat-form-field appearance="outline" class="relative">
        <mat-label>{{
          'components.templates.edit.subject' | translate
        }}</mat-label>
        <input
          matInput
          formControlName="subject"
          type="text"
          [style.opacity]="editingSubject ? '1' : '0'"
          (focus)="editingSubject = true"
          (blur)="editingSubject = false"
        />
        <span
          *ngIf="!editingSubject"
          class="subject-span"
          [innerHtml]="form.get('subject')?.value | placeholder | safeHtml"
        >
        </span>
      </mat-form-field>
      <editor #emailBody [init]="editor" formControlName="body"></editor>
    </form>
  </div>
  <div mat-dialog-actions align="end">
    <safe-button mat-dialog-close>
      {{ 'common.close' | translate }}
    </safe-button>
    <safe-button
      category="secondary"
      variant="primary"
      [mat-dialog-close]="form.value"
      [disabled]="!form.valid"
    >
      {{ (data ? 'common.update' : 'common.create') | translate }}
    </safe-button>
  </div>
</safe-modal>
