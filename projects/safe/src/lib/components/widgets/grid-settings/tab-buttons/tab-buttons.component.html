<div [formGroup]="formGroup" class="flex flex-col">
  <h2>
    {{ 'components.widget.settings.grid.buttons.title' | translate }}
  </h2>
  <safe-alert>
    <safe-icon icon="info"></safe-icon>
    {{ 'components.widget.settings.grid.hint.buttons' | translate }}
  </safe-alert>
  <safe-button
    style.align-self="flex-end"
    icon="add"
    variant="primary"
    (click)="addButton()"
  >
    {{ 'components.widget.settings.grid.buttons.create' | translate }}
  </safe-button>
  <mat-tab-group
    mat-align-tabs="start"
    animationDuration="0ms"
    dynamicHeight
    *ngIf="buttons.length > 0"
  >
    <ng-container *ngFor="let button of buttons.controls; let i = index">
      <mat-tab>
        <ng-template mat-tab-label>
          {{
            button.value.name.length > 0
              ? button.value.name
              : ('components.widget.settings.grid.buttons.defaultName'
                | translate)
          }}
          <safe-icon
            *ngIf="button.invalid"
            icon="error_outline"
            variant="danger"
            [inline]="true"
            [size]="18"
          ></safe-icon>
        </ng-template>
        <ng-template matTabContent>
          <safe-button-config
            [formGroup]="$any(button)"
            [fields]="fields"
            [channels]="channels"
            [templates]="templates"
            [relatedForms]="relatedForms"
            (deleteButton)="deleteButton(i)"
          >
          </safe-button-config>
        </ng-template>
      </mat-tab>
    </ng-container>
  </mat-tab-group>
</div>
