<form [formGroup]="form">
  <div class="flex flex-col">
    <h2>{{ 'common.general' | translate }}</h2>
    <mat-form-field appearance="outline">
      <mat-label>{{ 'common.name' | translate }}</mat-label>
      <input matInput formControlName="title" type="string" />
    </mat-form-field>
    <!-- Resource selection -->
    <mat-form-field appearance="outline" class="flex-1">
      <mat-label>{{ 'common.resource.one' | translate }}</mat-label>
      <safe-graphql-select
        valueField="id"
        textField="name"
        [query]="resourcesQuery"
        formControlName="resource"
        [selectedElements]="[resource]"
      >
      </safe-graphql-select>
    </mat-form-field>
  </div>
  <div class="flex flex-col mt-8" *ngIf="form.get('resource')">
    <h2>{{ 'components.widget.settings.map.dataset' | translate }}</h2>
    <safe-alert>
      <safe-icon icon="info"></safe-icon>
      {{ 'components.widget.settings.map.tooltip.dataset' | translate }}
    </safe-alert>
    <safe-query-builder
      [form]="$any(form.controls.query)"
      [queryName]="resource?.queryName"
      [canSelectDataSet]="false"
      [canExpand]="false"
      [showStyle]="false"
      [showSort]="false"
    ></safe-query-builder>
  </div>
</form>
