<safe-alert>
  <safe-icon icon="info"></safe-icon>
  {{ 'components.widget.settings.map.layers.online.info' | translate }}
</safe-alert>
<!-- LAYER SEARCHBAR -->
<mat-form-field appearance="outline" style="width: 100%">
  <mat-label>{{
    'components.widget.settings.map.layers.online.select' | translate
  }}</mat-label>
  <input
    type="text"
    matInput
    [(ngModel)]="search"
    [ngModelOptions]="{ standalone: true }"
    (ngModelChange)="onSearch($event)"
    autocomplete="off"
    placeholder="{{ 'common.placeholder.search' | translate }}"
  />
  <div *ngIf="availableLayers.length > 0" class="layer-suggestions">
    <safe-button
      *ngFor="let layer of availableLayers"
      (click)="addLayer(layer)"
    >
      {{ layer.title }}
      <safe-badge *ngFor="let tag of layer.tags">{{ tag }}</safe-badge>
    </safe-button>
  </div>
</mat-form-field>
<!-- LIST of LAYERS -->
<ng-container *ngIf="layers.value.length > 0">
  <h2>
    {{ 'components.widget.settings.map.layers.online.selected' | translate }}
  </h2>
  <!-- Table container -->
  <div class="overflow-x-hidden shadow-2lg">
    <!-- Table scroll container -->
    <div class="overflow-x-auto">
      <table mat-table [dataSource]="layers.value">
        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef>
            {{ 'common.name' | translate }}
          </th>
          <td mat-cell *matCellDef="let element">{{ element.title }}</td>
        </ng-container>
        <ng-container matColumnDef="actions" [stickyEnd]="true">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let element">
            <safe-button
              [isIcon]="true"
              icon="delete"
              category="primary"
              variant="danger"
              (click)="removeLayer(element.id)"
            ></safe-button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="tableColumns"></tr>
        <tr *matRowDef="let row; columns: tableColumns" mat-row></tr>
      </table>
    </div>
  </div>
</ng-container>
