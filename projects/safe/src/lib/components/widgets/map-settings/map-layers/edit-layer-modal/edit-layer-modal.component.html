<safe-modal size="medium" [closable]="true">
  <div class="flex flex-row space-x-4">
    <!-- Map section -->
    <safe-map
      (mapEvent)="handleMapEvent($event)"
      [header]="false"
      [settings]="settings"
      [deleteLayer]="layerToDelete$ | async"
      [addLayer]="layerToAdd$ | async"
      [updateLayerTree]="overlaysValue$ | async"
      class="w-4/5 group flex-1"
    >
    </safe-map>
    <div class="flex flex-col space-y-12">
      <!-- Options section -->
      <form [formGroup]="form" class="flex flex-col space-y-8">
        <!-- Layer name -->
        <mat-form-field appearance="outline">
          <mat-label>{{ 'common.name' | translate }}</mat-label>
          <input matInput formControlName="name" type="text" />
        </mat-form-field>
        <!-- Default visibility -->
        <mat-checkbox formControlName="defaultVisibility"
          >Visible by default</mat-checkbox
        >
        <!-- Opacity -->
        <div>
          <div class="flex flex-row w-full justify-between">
            <label>Opacity</label>
            <label>{{ form.controls.opacity.value }}</label>
          </div>
          <mat-slider
            class="w-full m-0"
            min="0"
            max="1"
            step="0.1"
            [discrete]="true"
          >
            <input matSliderThumb formControlName="opacity" />
          </mat-slider>
        </div>
        <!-- Visibility range -->
        <div>
          <div class="flex flex-row w-full justify-between">
            <label>Visibility range</label>
          </div>
          <mat-slider
            class="w-full m-0"
            min="2"
            max="18"
            step="1"
            [discrete]="true"
          >
            <input formControlName="visibilityRange" matSliderStartThumb />
            <input formControlName="visibilityRange" matSliderEndThumb />
          </mat-slider>
        </div>
        <!-- Zoom level -->
        <div>
          <label>Current zoom: {{ currentZoom }}</label>
        </div>
      </form>
      <!-- Dialog actions ( cancel / close ) -->
      <div mat-dialog-actions align="end">
        <safe-button mat-dialog-close>{{
          'common.close' | translate
        }}</safe-button>
        <safe-button
          category="secondary"
          variant="primary"
          [mat-dialog-close]="form.value"
          cdkFocusInitial
          [disabled]="!form.valid"
        >
          {{ (!layer ? 'common.create' : 'common.update') | translate }}
        </safe-button>
      </div>
    </div>
  </div>
</safe-modal>
