<safe-button
  class="close-settings"
  [isIcon]="true"
  icon="close"
  variant="danger"
  (click)="onClose()"
  [matTooltip]="'common.close' | translate"
>
</safe-button>
<h1 mat-dialog-title>
  {{ 'components.widget.settings.summaryCard.card.title' | translate }}
</h1>
<div mat-dialog-content class="mat-dialog-content">
  <form [formGroup]="form">
    <mat-tab-group #tabGroup (selectedTabChange)="handleTabChange($event)" [selectedIndex]="0">
      <mat-tab
        [label]="
          'components.widget.settings.summaryCard.card.dataSource.title'
            | translate
        "
      >
        <safe-data-source-tab [form]="form" [dataset]="dataset"></safe-data-source-tab>
      </mat-tab>
      <mat-tab
        [label]="
          'components.widget.settings.summaryCard.card.valueSelector.title'
            | translate
        "
      >
        <safe-value-selector-tab [form]="form" [settings]="gridSettings"></safe-value-selector-tab>
      </mat-tab>
      <mat-tab [label]="'common.display' | translate">
        <safe-display-tab [form]="form"></safe-display-tab>
      </mat-tab>
      <mat-tab
        [label]="
          'components.widget.settings.summaryCard.card.textEditor.title'
            | translate
        "
      >
        <safe-text-editor-tab *ngIf="isEditorTab()" [form]="form" [record]="loadedRecord"></safe-text-editor-tab>
      </mat-tab>
      <mat-tab [label]="'common.preview' | translate">
        <safe-preview-tab [html]="form.value.html" [record]="loadedRecord"></safe-preview-tab>
      </mat-tab>
    </mat-tab-group>
  </form>
</div>
<div mat-dialog-actions class="mat-dialog-actions" align="end">
  <button mat-button (click)="onClose()">
    {{ 'common.close' | translate }}
  </button>
  <button mat-flat-button (click)="onSubmit()" cdkFocusInitial color="primary">
    {{ 'common.save' | translate }}
  </button>
</div>
