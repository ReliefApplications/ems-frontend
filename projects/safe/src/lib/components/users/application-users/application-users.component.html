<div class="flex gap-8 justify-end mb-8 flex-col sm:flex-row">
  <!-- Actions -->
  <div class="flex gap-2 items-center">
    <!-- Actions when selected items -->
    <ng-container
      *ngIf="selection.selected.length > 0 && selectingFrom === 'manual'"
    >
      <safe-button
        icon="delete"
        category="secondary"
        variant="danger"
        (click)="onDelete(selection.selected)"
      >
        {{
          'common.deleteObject'
            | translate: { name: 'common.user.few' | translate }
        }}
      </safe-button>
    </ng-container>
    <safe-button
      class="export-users"
      icon="file_download"
      category="secondary"
      variant="primary"
      [matMenuTriggerFor]="menu"
    >
      {{
        'common.exportObject'
          | translate: { name: 'common.user.few' | translate }
      }}
    </safe-button>
    <mat-menu #menu="matMenu">
      <button mat-menu-item (click)="onExport('csv')">.csv</button>
      <button mat-menu-item (click)="onExport('xlsx')">.xlsx</button>
    </mat-menu>
    <safe-button
      class="export-users"
      icon="send"
      category="secondary"
      variant="primary"
      (click)="onInvite()"
    >
      {{ 'components.users.invite.confirm' | translate }}
    </safe-button>
  </div>
</div>

<mat-tab-group animationDuration="0ms" (selectedTabChange)="selection.clear()">
  <!-- Tab for manually assigned users -->
  <mat-tab [label]="'components.role.summary.users.manual' | translate">
    <ng-template matTabContent>
      <safe-users-table
        [users]="users"
        [loading]="loadingUsers"
        [pageInfo]="pageInfo.users"
        [displayedColumns]="manualColumns"
        (delete)="onDelete([$event])"
        (selection)="onSelectionChange('manual', $event)"
        (more)="usersService.getMoreManualUsers($event)"
      ></safe-users-table>
    </ng-template>
  </mat-tab>

  <!-- Tab for users assigned automatically -->
  <mat-tab [label]="'components.role.summary.users.auto' | translate">
    <ng-template matTabContent>
      <safe-users-table
        [users]="autoUsers"
        [loading]="loadingAutoUsers"
        [pageInfo]="pageInfo.autoAssignedUsers"
        [displayedColumns]="autoColumns"
        (selection)="onSelectionChange('auto', $event)"
        (more)="usersService.getMoreAutoUsers($event)"
      ></safe-users-table>
    </ng-template>
  </mat-tab>
</mat-tab-group>
