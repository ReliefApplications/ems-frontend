<button
  mat-icon-button
  [matMenuTriggerFor]="menu"
  aria-label="Example icon-button with a menu"
  cdkOverlayOrigin
  #appMenuTrigger="cdkOverlayOrigin"
>
  <mat-icon>more_vert</mat-icon>
</button>
<mat-menu #menu="matMenu">
  <ng-container *ngFor="let item of items">
    <mat-divider *ngIf="item.name === 'Delete'"></mat-divider>

    <button mat-menu-item (click)="onClick(item)" [disabled]="item.disabled">
      <mat-icon>{{ item.icon }}</mat-icon>
      <span>{{ item.text }}</span>
    </button>
  </ng-container>
</mat-menu>

<ng-template #searchMenuHeaderTemplate>
  <safe-alert
    ><safe-icon icon="info"></safe-icon>
    {{ 'models.widget.tooltip.duplicate' | translate }}
  </safe-alert>
</ng-template>

<ng-template
  cdkConnectedOverlay
  [cdkConnectedOverlayOrigin]="appMenuTrigger"
  [cdkConnectedOverlayOpen]="showAppMenu"
>
  <safe-search-menu
    [headerTemplate]="searchMenuHeaderTemplate"
    [currentApplicationId]="applicationId"
    [applications]="applications"
    [selectDashboard]="true"
    (close)="showAppMenu = false"
    (open)="onDuplicate($event)"
  ></safe-search-menu>
</ng-template>
