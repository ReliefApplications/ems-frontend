<ng-container
  *ngIf="floating; then floatingTemplate; else listTemplate"
></ng-container>

<ng-template #listTemplate>
  <div class="safe-widget-choice">
    <div
      class="safe-widget-type"
      *ngFor="let type of widgetTypes"
      (click)="onSelect(type)"
      matRipple
      [ngStyle]="hovered === type.id ? { 'border-color': type.color } : null"
      (mouseover)="hovered = type.id"
      (mouseout)="hovered = ''"
    >
      <img [src]="type.icon" />
      <span class="text-xl text-gray-500 mb-4">{{
        type.name | titlecase
      }}</span>
    </div>
  </div>
</ng-template>

<ng-template #floatingTemplate>
  <ng-container
    *ngIf="collapsed; then collapsedTemplate; else barTemplate"
  ></ng-container>
</ng-template>

<ng-template #barTemplate>
  <div class="safe-floating-widget-choice shadow-lg" cdkDrag>
    <div class="safe-widget-type-list">
      <div
        class="safe-widget-type"
        *ngFor="let type of widgetTypes"
        (click)="onSelect(type)"
        [matTooltip]="type.name"
        matTooltipPosition="above"
        (mouseover)="hovered = type.id"
        (mouseout)="hovered = ''"
      >
        <img [src]="type.icon" />
        <div
          *ngIf="hovered === type.id"
          [style.background]="type.color"
          class="safe-widget-hovered"
        ></div>
      </div>
    </div>
    <safe-button
      category="secondary"
      variant="primary"
      icon="close"
      [isIcon]="true"
      (click)="collapsed = true"
      [matTooltip]="'models.widget.tooltip.selector.collapse' | translate"
      matTooltipPosition="above"
    ></safe-button>
  </div>
</ng-template>

<ng-template #collapsedTemplate>
  <div class="rounded-full ml-auto mr-6 shadow-lg" cdkDrag>
    <safe-button
      category="tertiary"
      variant="primary"
      icon="widgets"
      [isIcon]="true"
      (click)="collapsed = false"
      [matTooltip]="'models.widget.tooltip.selector.expand' | translate"
      matTooltipPosition="left"
    ></safe-button>
  </div>
</ng-template>
