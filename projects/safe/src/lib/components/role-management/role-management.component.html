<h1>{{roleForm?.get('name')?.value}}</h1>
<form [formGroup]="roleForm" *ngIf="roleForm" (ngSubmit)="onSubmit()">
    <mat-tab-group>
        <mat-tab [label]="'Summary'">
                <div class="form-group">
                    <mat-form-field appearance="outline">
                        <mat-label>
                            {{'common.name' | translate}}
                        </mat-label>
                        <input matInput formControlName="name" type='text' />
                    </mat-form-field>
                    <mat-form-field appearance="outline">
                        <mat-label>
                            {{'models.application.description' | translate}}
                        </mat-label>
                        <textarea matInput
                            formControlName="description"
                            cdkTextareaAutosize
                            #autosize="cdkTextareaAutosize">
                        </textarea>
                    </mat-form-field>
                    <div class="checkbox-area">
                        <mat-checkbox formControlName="canSeeRoles">
                            {{'components.role.permissions.canSeeRoles' | translate}}
                        </mat-checkbox>
                        <mat-checkbox formControlName="canSeeUsers">
                            {{'components.role.permissions.canSeeUsers' | translate}}
                        </mat-checkbox>
                    </div>
                    <div class="users-area">
                        <h3>{{'common.user.few' | translate}}</h3>
                        <div>
                            <p *ngFor="let user of users">{{user}}</p>
                        </div>
                    </div>
                </div>
        </mat-tab>
        <mat-tab [label]="'Features'" *ngIf="!inApp">
            <div class="searchbar">
                <mat-form-field appearance="outline">
                    <mat-icon matPrefix>search</mat-icon>
                    <input matInput
                        type="search"
                        [(ngModel)]="featureSearch"
                        [ngModelOptions]="{standalone: true}"
                        [placeholder]="'common.placeholder.search' | translate"
                        (ngModelChange)="onFeatureSearch()">
                </mat-form-field>
            </div>
            <ng-container *ngFor="let group of features">
                <mat-expansion-panel *ngIf="group.contents.length > 0">
                    <mat-expansion-panel-header>
                        <mat-panel-title class="panel-header">
                            <mat-icon *ngIf="group.icon.length > 0">{{group.icon}}</mat-icon>
                            {{('common.' + group.type + '.few') | translate}}
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="checkbox-area">
                            <mat-checkbox
                                *ngFor="let feature of group.contents"
                                [checked]="selectedFeatures.includes(feature.id)"
                                (click)="$event.preventDefault(); onFeatureClick(feature.id)">
                                {{feature.title}}
                            </mat-checkbox>
                    </div>
                </mat-expansion-panel>
            </ng-container>
            <div class="spacer"></div>
        </mat-tab>
        <mat-tab [label]="'Channels'">
            <div class="searchbar">
                <mat-form-field appearance="outline">
                    <mat-icon matPrefix>search</mat-icon>
                    <input matInput
                        type="search"
                        [(ngModel)]="channelSearch"
                        [ngModelOptions]="{standalone: true}"
                        [placeholder]="'common.placeholder.search' | translate"
                        (ngModelChange)="onChannelSearch()">
                </mat-form-field>
            </div>
            <ng-container *ngFor="let application of applications">
                <mat-expansion-panel *ngIf="application.channels.length > 0">
                    <mat-expansion-panel-header>
                        <mat-panel-title>
                            {{application.name}}
                        </mat-panel-title>
                    </mat-expansion-panel-header>
                    <div class="checkbox-area">
                            <mat-checkbox
                                *ngFor="let channel of application.channels"
                                [checked]="selectedChannels.includes(channel.id)"
                                (click)="$event.preventDefault(); onChannelClick(channel.id)">
                                {{channel.title}}
                            </mat-checkbox>
                    </div>
                </mat-expansion-panel>
            </ng-container>
            <div class="spacer"></div>
        </mat-tab>
    </mat-tab-group>
    <safe-button variant="primary" category="secondary" type="submit">{{ 'common.saveChanges' | translate }}</safe-button>
</form> 