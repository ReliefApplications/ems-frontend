<mat-form-field appearance="outline">
  <mat-label *ngIf="!label">{{
    'components.aggregationBuilder.dataset.select' | translate
  }}</mat-label>
  <mat-label *ngIf="label">{{ label }}</mat-label>
  <input
    type="text"
    [placeholder]="'common.placeholder.search' | translate"
    matInput
    [formControl]="sourceFormControl"
    [matAutocomplete]="auto"
  />
  <mat-autocomplete
    autoActiveFirstOption
    #auto="matAutocomplete"
    [displayWith]="displayName.bind(this)"
    (opened)="onOpen($event)"
    (closed)="onClose($event)"
  >
    <mat-option
      *ngFor="let form of filteredForms"
      [value]="valueById ? form.id : form.name"
      class="form-option"
    >
      {{ form.name }}
      <safe-icon
        *ngIf="form.core"
        icon="storage"
        variant="primary"
        [size]="20"
      ></safe-icon>
    </mat-option>
  </mat-autocomplete>
  <mat-spinner *ngIf="loadingMore" diameter="24" matSuffix></mat-spinner>
</mat-form-field>
