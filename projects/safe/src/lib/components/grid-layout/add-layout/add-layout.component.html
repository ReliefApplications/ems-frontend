<safe-modal size="medium">
  <h1 mat-dialog-title>
    {{ 'components.widget.settings.grid.layouts.add.title' | translate }}
  </h1>
  <div mat-dialog-content>
    <div class="add-layout-choice" *ngIf="!nextStep">
      <!-- LOAD FROM EXISTING LAYOUT -->
      <safe-button
        variant="primary"
        category="secondary"
        [block]="true"
        (click)="nextStep = true"
        [disabled]="layouts.length < 1"
        >{{
          'components.widget.settings.grid.layouts.add.choice.load' | translate
        }}</safe-button
      >
      <!-- ADD A NEW LAYOUT -->
      <safe-button
        variant="primary"
        category="tertiary"
        [block]="true"
        (click)="onCreate()"
        >{{
          'components.widget.settings.grid.layouts.add.choice.create'
            | translate
        }}</safe-button
      >
    </div>
    <div *ngIf="nextStep">
      <div class="select-layout-header">
        <safe-button
          [isIcon]="true"
          icon="arrow_back"
          (click)="nextStep = false"
        ></safe-button>
        <div>
          {{
            'components.widget.settings.grid.layouts.add.choice.load'
              | translate
          }}
        </div>
      </div>
      <mat-form-field appearance="outline">
        <mat-label>{{
          'components.widget.settings.grid.layouts.add.select' | translate
        }}</mat-label>
        <safe-graphql-select
          *ngIf="queryRef"
          valueField="id"
          textField="name"
          [basePath]="'resource.layouts'"
          [required]="true"
          [variables]="{ resource: resource?.id }"
          [query]="queryRef"
          (selectionChange)="onSelect($event)"
        >
        </safe-graphql-select>
      </mat-form-field>
    </div>
  </div>
  <div mat-dialog-actions align="end">
    <safe-button mat-dialog-close>{{ 'common.close' | translate }}</safe-button>
  </div>
</safe-modal>
