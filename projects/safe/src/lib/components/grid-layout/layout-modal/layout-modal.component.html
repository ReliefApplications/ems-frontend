<safe-modal [closable]="true">
  <h1 mat-dialog-title>
    {{ 'components.widget.settings.grid.layouts.edit.title' | translate }}
  </h1>
  <div mat-dialog-content class="mat-dialog-content" *ngIf="form">
    <form [formGroup]="form">
      <div class="form-group">
        <div class="form-group-title">{{ 'common.general' | translate }}</div>
        <mat-form-field appearance="outline">
          <mat-label>{{ 'common.title' | translate }}</mat-label>
          <input matInput formControlName="name" type="string" />
        </mat-form-field>
      </div>
      <div class="form-group">
        <safe-query-builder
          [form]="$any(form.controls.query)"
          [templates]="templates"
          [queryName]="data.queryName"
          [layoutPreviewData]="layoutPreviewData"
        ></safe-query-builder>
      </div>
    </form>
  </div>
  <div mat-dialog-actions class="mat-dialog-actions" align="end">
    <safe-button mat-dialog-close>
      {{ 'common.close' | translate }}
    </safe-button>
    <safe-button
      category="secondary"
      variant="primary"
      (click)="onSubmit()"
      cdkFocusInitial
      [disabled]="!form || !form.valid"
    >
      {{ 'common.save' | translate }}
    </safe-button>
  </div>
</safe-modal>
