<div class="header">
  <h2>{{ 'components.role.summary.automaticAssignment.title' | translate }}</h2>
  <safe-button
    icon="add"
    variant="primary"
    category="secondary"
    (click)="onAddRule()"
    >{{
      'components.role.summary.automaticAssignment.rule.add' | translate
    }}</safe-button
  >
</div>
<safe-skeleton-table
  *ngIf="loading"
  [columns]="['components.role.summary.automaticAssignment.rule.title']"
  [actions]="true"
  [rows]="5"
>
</safe-skeleton-table>
<table mat-table [dataSource]="rules" *ngIf="!loading">
  <ng-container matColumnDef="filter">
    <th mat-header-cell *matHeaderCellDef>
      {{ 'components.role.summary.automaticAssignment.rule.title' | translate }}
    </th>
    <td mat-cell *matCellDef="let element" class="capitalize">
      {{ getRuleString(element) }}
    </td>
  </ng-container>
  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef></th>
    <td mat-cell *matCellDef="let i = index">
      <div style="display: flex">
        <safe-button
          [isIcon]="true"
          icon="delete"
          variant="grey"
          [matTooltip]="
            'components.role.summary.automaticAssignment.rule.delete'
              | translate
          "
          (click)="onDeleteRule(i)"
        >
        </safe-button>
      </div>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr
    *matRowDef="let row; columns: displayedColumns; let i = index"
    mat-row
    (click)="onEditRule(i)"
    style="cursor: pointer"
  ></tr>
</table>
