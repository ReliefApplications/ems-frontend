<div class="toolbar">
  <div class="flex items-center gap-2 overflow-hidden">
    <!-- Title -->
    <h2 class="!m-0 overflow-hidden text-ellipsis whitespace-nowrap">
      {{ title }}
    </h2>
    <!-- Settings -->
    <safe-button
      *ngIf="settings.length > 0"
      [isIcon]="true"
      icon="tune"
      variant="grey"
      [matMenuTriggerFor]="settingsMenu"
    ></safe-button>
    <!-- Access -->
    <safe-access
      *ngIf="title && canUpdate"
      [access]="application?.permissions"
      [objectTypeName]="'common.application.one' | translate"
      (save)="saveAccess($event)"
    ></safe-access>
  </div>
  <div class="toolbar-buttons">
    <safe-button
      *ngIf="application?.canUpdate && locked"
      [isIcon]="true"
      icon="lock"
      [variant]="lockedByUser ? 'primary' : 'danger'"
      (click)="onUnlock()"
    >
    </safe-button>
    <safe-button variant="danger" (click)="onClose()">{{
      'common.close' | translate
    }}</safe-button>
    <safe-button
      *ngIf="showPublish"
      category="secondary"
      variant="success"
      (click)="onPublish()"
      [disabled]="!canPublish || this.application?.status === 'active'"
      >{{ 'common.publish' | translate }}</safe-button
    >
  </div>
</div>

<!-- Admin pages -->
<mat-menu #settingsMenu="matMenu">
  <button
    mat-menu-item
    *ngFor="let setting of settings"
    class="menu-item"
    [routerLink]="setting.path"
    routerLinkActive="active-link"
  >
    <mat-icon class="nav-icon">
      {{ setting.icon }}
    </mat-icon>
    {{ setting.name }}
  </button>
</mat-menu>
