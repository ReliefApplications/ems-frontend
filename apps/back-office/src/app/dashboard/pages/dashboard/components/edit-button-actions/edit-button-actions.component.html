<ui-dialog size="medium" [closable]="true">
  <ng-container ngProjectAs="header">
    <h3 class="font-semibold">
      {{
        'models.dashboard.buttonActions.edit.few' | translate
      }}
    </h3>
  </ng-container>

  <ng-container ngProjectAs="content">
    <div class="flex justify-between mb-4">
      <div
        uiFormFieldDirective
        [defaultMargin]="false"
        class="p-0"
      >
        <ui-icon icon="search" uiPrefix></ui-icon>
        <input
          type="text"
          [placeholder]="'common.placeholder.search' | translate"
          [(ngModel)]="searchTerm"
          (ngModelChange)="updateDatasource()"
        />
      </div>
      <ui-button
        category="secondary"
        variant="primary"
        icon="add"
        (click)="onAddButtonAction()"
        >
          {{ 'models.dashboard.buttonActions.create' | translate }}
        </ui-button>
    </div>
    <!-- Table container -->
    <div class="overflow-y-auto overflow-hidden mb-4">
      <!-- Table scroll container -->
      <div class="overflow-x-auto h-[400px]">
        <table
          cdk-table
          uiTableWrapper
          [dataSource]="datasource"
          cdkDropList
          (cdkDropListDropped)="drop($event)"
        >
          <ng-container cdkColumnDef="dragDrop" [sticky]="true">
            <th uiCellHeader *cdkHeaderCellDef class="w-16"></th>
            <td uiCell *cdkCellDef="let element">
              <ui-button
                [disabled]="searchTerm !== ''"
                cdkDragHandle
                [isIcon]="true"
                icon="drag_indicator"
                [uiTooltip]="'common.tooltip.dragDrop' | translate"
              >
              </ui-button>
            </td>
          </ng-container>

          <ng-container cdkColumnDef="name">
            <th uiCellHeader *cdkHeaderCellDef class="w-[200px]">
              {{ 'common.title' | translate }}
            </th>
            <td
              uiCell
              *cdkCellDef="let element"
              class="!text-gray-900 !font-medium max-w-[30vw]"
            >
              {{ element.text }}
            </td>
          </ng-container>

          <ng-container cdkColumnDef="roles">
            <th uiCellHeader *cdkHeaderCellDef>
              {{ 'models.dashboard.buttonActions.visibleTo' | translate }}
            </th>
            <td
              uiCell
              *cdkCellDef="let element"
              class="!text-gray-900 !font-medium max-w-[30vw]"
            >
              Dummy roles
            </td>
          </ng-container>

          <ng-container cdkColumnDef="actions" [stickyEnd]="true">
            <th uiCellHeader *cdkHeaderCellDef class="w-16"></th>
            <td uiCell *cdkCellDef="let element">
              <ui-button
                [isIcon]="true"
                icon="more_vert"
                [uiMenuTriggerFor]="menu"
                (click)="$event.stopPropagation()"
                [uiTooltip]="'common.actions' | translate"
              >
              </ui-button>
              <ui-menu #menu>
                <button uiMenuItem (click)="onEditButtonAction(element)">
                  <ui-icon icon="edit" variant="grey"></ui-icon>
                  {{ 'common.edit' | translate }}
                </button>
                <button uiMenuItem (click)="onDeleteButtonAction(element)">
                  <ui-icon icon="delete" variant="danger"></ui-icon>
                  {{ 'common.delete' | translate }}
                </button>
              </ui-menu>
            </td>
          </ng-container>

          <tr cdk-header-row *cdkHeaderRowDef="displayedColumns"></tr>
          <tr
            class="cursor-pointer"
            cdk-row
            *cdkRowDef="let row; columns: displayedColumns"
            cdkDrag
          ></tr>
        </table>
      </div>
    </div>
  </ng-container>

  <ng-container ngProjectAs="actions">
    <ui-button
      category="secondary"
      variant="primary"
      (click)="onSubmit()"
      cdkFocusInitial
    >
      {{ 'common.save' | translate }}
    </ui-button>
  </ng-container>
</ui-dialog>
